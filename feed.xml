<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://wechaty.js.org/feed.xml" rel="self" type="application/atom+xml" /><link href="https://wechaty.js.org/" rel="alternate" type="text/html" /><updated>2025-04-05T02:32:48+00:00</updated><id>https://wechaty.js.org/feed.xml</id><title type="html">Wechaty</title><subtitle>Conversational RPA SDK for Chatbot Makers</subtitle><entry><title type="html">ğŸš€ Whatâ€™s the Best Transport for an Event-Driven Architecture: WebSocket or SSE + POST?</title><link href="https://wechaty.js.org/2025/04/04/best-transport-for-event-driven-architecture-websocket-or-sse-post/" rel="alternate" type="text/html" title="ğŸš€ Whatâ€™s the Best Transport for an Event-Driven Architecture: WebSocket or SSE + POST?" /><published>2025-04-04T00:00:00+00:00</published><updated>2025-04-04T00:00:00+00:00</updated><id>https://wechaty.js.org/2025/04/04/best-transport-for-event-driven-architecture-websocket-or-sse-post</id><content type="html" xml:base="https://wechaty.js.org/2025/04/04/best-transport-for-event-driven-architecture-websocket-or-sse-post/"><![CDATA[<p>As the creator of the <a href="https://github.com/wechaty/wechaty">Wechaty</a> and <a href="https://github.com/chatie">Chatie</a> projects, Iâ€™ve spent years building conversational and messaging tools for developers. Now, Iâ€™m investing in a new phase of <strong>cloud-native, event-driven infrastructure</strong> for Chatie, and I want to get the architecture right from day one.</p>

<p>For this next-generation system, Iâ€™m adopting:</p>

<ul>
  <li><strong>CQRS</strong> (Command Query Responsibility Segregation)</li>
  <li><strong>Event Sourcing</strong></li>
  <li><strong>Event-Driven Programming</strong></li>
</ul>

<p>These patterns enable scalable, modular systems with clear separation of concerns. But to tie it all together, I need a reliable, flexible, and efficient <strong>messaging transport</strong> â€” something that works both <strong>internally between services</strong>, and <strong>externally with clients</strong> (browsers, CLI tools, etc).</p>

<p>So the big question became:<br />
<strong>What transport should I use for streaming and event communication?</strong></p>

<hr />

<h2 id="-the-problem-choosing-a-universal-messaging-protocol">â“ The Problem: Choosing a Universal Messaging Protocol</h2>

<p>My goal is to design a <strong>universal communication layer</strong> that:</p>

<ol>
  <li>Works across <strong>cloud environments</strong> and <strong>local development</strong>.</li>
  <li>Supports <strong>event-driven</strong> messaging â€” sending and receiving updates in real-time.</li>
  <li>
    <p>Plays nicely with modern <strong>web clients</strong>, <strong>CLI</strong>, and <strong>microservices</strong>.</p>
  </li>
  <li>Allows <strong>stateless request handling</strong> (ideal for serverless and horizontally scalable systems).</li>
</ol>

<p>Naturally, <strong>WebSocket</strong> is a common choice for bi-directional, real-time communication. But is it the best choice for this use case? I decided to dive deeper and explore another approach: <strong>HTTP POST + Server-Sent Events (SSE)</strong> â€” especially after learning how the <a href="https://modelcontextprotocol.io/introduction">Model Context Protocol (MCP)</a> team made a similar decision.</p>

<hr />

<h2 id="-the-solution-http-post--sse-vs-websocket">âœ… The Solution: HTTP POST + SSE vs. WebSocket</h2>

<p>After extensive research and experimentation, Iâ€™ve decided to go with <strong>HTTP POST + Server-Sent Events (SSE)</strong> as the primary messaging transport for Chatie.</p>

<p>Letâ€™s break it down.</p>

<hr />

<h2 id="ï¸-comparing-websocket-vs-sse--post">âš–ï¸ Comparing WebSocket vs SSE + POST</h2>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>WebSocket</th>
      <th>HTTP POST + SSE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Bi-directional</strong></td>
      <td>âœ… Full-duplex</td>
      <td>ğŸ”„ Half-duplex (Client sends via POST, Server streams via SSE)</td>
    </tr>
    <tr>
      <td><strong>Works with HTTP semantics (e.g., POST, headers)</strong></td>
      <td>âŒ No (only GET upgrade)</td>
      <td>âœ… Yes</td>
    </tr>
    <tr>
      <td><strong>Authentication (e.g., <code class="language-plaintext highlighter-rouge">Authorization</code> header)</strong></td>
      <td>âŒ Limited in browsers</td>
      <td>âœ… Fully supported</td>
    </tr>
    <tr>
      <td><strong>Browser support</strong></td>
      <td>âœ… Native WebSocket API</td>
      <td>âœ… Native EventSource API</td>
    </tr>
    <tr>
      <td><strong>Proxy/firewall friendliness</strong></td>
      <td>âš ï¸ Sometimes blocked</td>
      <td>âœ… Treated as normal HTTP</td>
    </tr>
    <tr>
      <td><strong>Ease of debugging</strong></td>
      <td>âš ï¸ Requires special tools</td>
      <td>âœ… Can use <code class="language-plaintext highlighter-rouge">curl</code>, browser, etc.</td>
    </tr>
    <tr>
      <td><strong>Stateless-friendly (serverless, scale-out)</strong></td>
      <td>âŒ Long-lived stateful connection</td>
      <td>âœ… Stateless POST + stream</td>
    </tr>
    <tr>
      <td><strong>Resumability (auto-reconnect)</strong></td>
      <td>âŒ Manual reconnection logic needed</td>
      <td>âœ… Built-in with EventSource</td>
    </tr>
    <tr>
      <td><strong>Complexity</strong></td>
      <td>âš ï¸ Needs upgrade handshake, framing</td>
      <td>âœ… Simple HTTP + text stream</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-architecture-diagrams">ğŸ”§ Architecture Diagrams</h2>

<h3 id="websocket-architecture">WebSocket Architecture</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Client &lt;======&gt; WebSocket Server
      [ Bi-directional | Long-lived connection ]
</code></pre></div></div>

<h3 id="sse--post-architecture">SSE + POST Architecture</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Client --(POST)--&gt; Server
Client &lt;--(SSE)-- Server

      [ Stateless requests + Server-push stream ]
</code></pre></div></div>

<hr />

<h2 id="-code-examples">ğŸ’» Code Examples</h2>

<h3 id="sse--post-example-nodejs--express">SSE + POST Example (Node.js / Express)</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Server (Express)</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/run-tool</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Process the incoming command</span>
  <span class="kd">const</span> <span class="nx">toolInput</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>

  <span class="nx">res</span><span class="p">.</span><span class="nf">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/event-stream</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nf">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cache-Control</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">no-cache</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nf">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connection</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">keep-alive</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Simulate streaming output</span>
  <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nf">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">`data: Output at </span><span class="p">${</span><span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">toISOString</span><span class="p">()}</span><span class="s2">\n\n`</span><span class="p">);</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

  <span class="c1">// Stop after 5 seconds</span>
  <span class="nf">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">event: done</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">data: Stream complete</span><span class="se">\n\n</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
  <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Client (Browser)</span>
<span class="kd">const</span> <span class="nx">evtSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EventSource</span><span class="p">(</span><span class="dl">'</span><span class="s1">/run-tool</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">evtSource</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Message:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">evtSource</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">done</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Stream completed</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">evtSource</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<h2 id="-resources--references">ğŸ“š Resources &amp; References</h2>

<ul>
  <li>MCP GitHub PR on SSE vs WebSocket: <a href="https://github.com/modelcontextprotocol/specification/pull/206">https://github.com/modelcontextprotocol/specification/pull/206</a></li>
  <li>Durable Objects &amp; HTTP Streaming: <a href="https://blog.cloudflare.com/introducing-workers-durable-objects/#why-not-websockets">https://blog.cloudflare.com/introducing-workers-durable-objects/#why-not-websockets</a></li>
</ul>

<hr />

<h2 id="-conclusion">ğŸ§  Conclusion</h2>

<p>If youâ€™re building a <strong>real-time, event-driven system</strong>, itâ€™s easy to default to WebSockets. But before you do, consider whether you really need full-duplex communication.</p>

<p>For most <strong>CQRS</strong>, <strong>event-sourcing</strong>, and <strong>cloud-native</strong> use cases â€” where clients <strong>send a command</strong> and <strong>receive streamed events</strong> â€” a combination of <strong>HTTP POST + SSE</strong> gives you the best of both worlds:</p>

<ul>
  <li>Clean request/response semantics</li>
  <li>Streaming real-time updates</li>
  <li>Low complexity and broad compatibility</li>
</ul>

<p>This is why <strong>Chatie will be built on SSE + POST</strong>, and I believe itâ€™s a powerful, underused pattern that deserves more attention in the developer community.</p>

<hr />

<p>ğŸ’¬ Iâ€™d love to hear your thoughts! Have you used SSE or WebSockets in your projects? What challenges did you face? Letâ€™s chat in the comments or <a href="https://github.com/chatie">on GitHub</a>.</p>]]></content><author><name>huan</name></author><category term="event" /><category term="event-driven" /><category term="cqrs" /><category term="cloud-native" /><summary type="html"><![CDATA[As the creator of the Wechaty and Chatie projects, Iâ€™ve spent years building conversational and messaging tools for developers. Now, Iâ€™m investing in a new phase of cloud-native, event-driven infrastructure for Chatie, and I want to get the architecture right from day one.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2025/04-best-transport-for-event-driven-architecture-websocket-or-sse-post/sse-post-websocket.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2025/04-best-transport-for-event-driven-architecture-websocket-or-sse-post/sse-post-websocket.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">AWS with Wechaty | AWS ç”Ÿæˆå¼ AI åº”ç”¨æŒ‘æˆ˜èµ›é‡ç£…æ¥è¢­ï¼</title><link href="https://wechaty.js.org/2024/04/25/wechaty-with-aws2024/" rel="alternate" type="text/html" title="AWS with Wechaty | AWS ç”Ÿæˆå¼ AI åº”ç”¨æŒ‘æˆ˜èµ›é‡ç£…æ¥è¢­ï¼" /><published>2024-04-25T00:00:00+00:00</published><updated>2024-04-25T00:00:00+00:00</updated><id>https://wechaty.js.org/2024/04/25/wechaty-with-aws2024</id><content type="html" xml:base="https://wechaty.js.org/2024/04/25/wechaty-with-aws2024/"><![CDATA[<p>âœ¨ <strong>ç¬¬äºŒå±Šä¸­å›½ç”Ÿæˆå¼ AI åˆ›æ–°åº”ç”¨æŒ‘æˆ˜èµ›</strong> âœ¨
è§è¯ä¸‹ä¸€æ‰¹ç‹¬è§’å…½çš„è¯ç”Ÿï¼
<a href="https://mp.weixin.qq.com/s/kDyn9qL54jr7NCKg--RIvA">é˜…è¯»åŸæ–‡</a></p>

<p>ç¬¬äºŒå±Šä¸­å›½ç”Ÿæˆå¼ AI åº”ç”¨åˆ›æ–°æŒ‘æˆ˜èµ›æ‹‰å¼€å¸·å¹•ï¼</p>

<p>è·å¾—ä¸šå†…ä¸€è‡´å¥½è¯„çš„</p>

<p><strong>â€œä¸­å›½ç”Ÿæˆå¼ AI åº”ç”¨åˆ›æ–°æŒ‘æˆ˜èµ›â€</strong>åˆæ¥å•¦ï¼</p>

<p>åœ¨å»å¹´ï¼Œäºšé©¬é€Šäº‘ç§‘æŠ€è”åˆæ¸…åå¤§å­¦åŸºç¡€æ¨¡å‹ä¸­å¿ƒå’Œä¼—å¤šç”Ÿæˆå¼ AI å¤´éƒ¨æœºæ„ä¸¾åŠäº†é¦–å±Šâ€œä¸­å›½ç”Ÿæˆå¼ AI åº”ç”¨åˆ›æ–°æŒ‘æˆ˜èµ›â€ï¼Œå¸å¼•äº†<strong>è¶…è¿‡600åæ¥è‡ªä¸åŒè¡Œä¸šçš„å¼€å‘è€…ä¸åˆ›ä¸šè€…</strong>å‚ä¸ï¼Œå¹¶å¸®åŠ©è¿™äº›å¼€å‘è€…åˆ©ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€ä»¥åŠåˆä½œä¼ä¸šçš„ç”Ÿæˆå¼ AI æœåŠ¡ï¼Œæ„å»ºäº†<strong>è¶…è¿‡140ä¸ªç”Ÿæˆå¼ AI åˆ›æ–°é¡¹ç›®</strong>ã€‚</p>

<p>ä»æœ¬æœˆä¸­æ—¬å¼€å§‹ï¼Œæœ¬å±ŠæŒ‘æˆ˜èµ›æºæ‰‹ Wechaty ç­‰å¼€æºç¤¾åŒºï¼Œå¹¶è”åˆ<strong>äºšé©¬é€Šäº‘ç§‘æŠ€åˆåˆ›ç”Ÿæ€</strong>åŠä¼—å¤šä¸­å›½ç”Ÿæˆå¼ AI é¢†åŸŸç‹¬è§’å…½ï¼Œæ‰“é€ ç”Ÿæˆå¼ AI é¢†åŸŸçš„æ˜æ˜Ÿèµ›äº‹ã€‚</p>

<h2 id="èµ›é¢˜ç®€ä»‹">èµ›é¢˜ç®€ä»‹</h2>

<p>æ‰€æœ‰æŠ¥åé€‰æ‰‹å°†é€šè¿‡å­¦ä¹ æœ¬æ¬¡æ¯”èµ›å‘å¸ƒçš„ä¸€ç³»åˆ—è¯¾ç¨‹ï¼ŒæŒæ¡ç”Ÿæˆå¼ AI æŠ€æœ¯çš„æ ¸å¿ƒç†è®ºå’Œå®è·µå·¥å…·ï¼Œå®Œæˆå¤æ‚çš„ç”Ÿæˆå¼ AI åº”ç”¨åˆ›æ–°ã€‚å‚èµ›è€…éœ€è¦é€‰æ‹©åˆé€‚çš„å¤§æ¨¡å‹ä½œä¸ºåº”ç”¨æ ¸å¿ƒï¼Œæ ¹æ®è‡ªå·±çš„å…´è¶£å’Œåˆ›æ„ï¼Œé€‰æ‹©ä¸åŒçš„è¡Œä¸šä»»åŠ¡é¢†åŸŸï¼ˆå¦‚å‡ºæµ·ã€ç”µå•†ã€æ•™è‚²ã€å¨±ä¹ã€åŒ»ç–—ã€é‡‘èç­‰ï¼‰ï¼Œè®¾è®¡å‡ºå…¼é¡¾æ•ˆç‡å’Œæˆæœ¬ã€æœ‰ä»·å€¼çš„ç”Ÿæˆå¼ AI åº”ç”¨ã€‚</p>

<p>æœ¬æ¬¡å¤§èµ›éœ€è¦æ¥è‡ª Wechaty å¼€æºç¤¾åŒºçš„é€‰æ‰‹<strong>ä½¿ç”¨ AWS å’Œ Wechaty ä¸¤ä¸ªäº§å“</strong>æ¥æ‰“é€ å±äºè‡ªå·±åŸºäºå¤§æ¨¡å‹çš„åˆ›æ„ai ChatBotï¼Œè€Œå¤§èµ›å®˜æ–¹ä¸ºé€‰æ‰‹ä»¬æä¾›çš„ä¸ä»…æ˜¯ä¸€ä¸ªå…¨æ–°çš„AIèƒ½åŠ›å¹³å°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸å„è·¯å¥½æ‰‹ä¸€è¾ƒé«˜ä¸‹çš„èˆå°ã€‚é‚£ä¹ˆè¿™ä¸¤å¤§å¼€æºäº§å“æœ‰å“ªäº›èƒ½åŠ›å‘¢ï¼Ÿ</p>

<p>æ— è®ºä½ æ˜¯åˆ›ä¸šè€…è¿˜æ˜¯å¼€å‘è€…ï¼Œéƒ½å¯ä»¥åœ¨æœ¬æ¬¡èµ›äº‹ä¸­å¿«é€Ÿä»å­¦ä¹ åˆ°æ„å»ºã€‚æˆ‘ä»¬å°†åœ¨æµ·é€‰é˜¶æ®µæ™‹çº§20æ”¯ä¼˜èƒœé˜Ÿä¼ï¼Œå‚ä¸5æœˆ30æ—¥<strong>åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½å³°ä¼šçš„èˆå°ä¸Šçš„æ€»å†³èµ›è·¯æ¼”</strong>ï¼Œå‘ä¸šå†…é¡¶å°–çš„æŠ€æœ¯ä¸“å®¶ä¸æŠ•èµ„æœºæ„å±•ç°æ‚¨çš„ä½œå“ã€‚</p>

<p>ç›®å‰è¯¥èµ›äº‹å·²ç»å¼€æ”¾æŠ¥åå’Œä½œå“æäº¤ï¼Œ<strong>æ‰«æä¸‹æ–¹äºŒç»´ç ï¼Œç«‹å³æŠ¥åå‚èµ›ï¼</strong>
<img src="/assets/2024/04-wechaty-with-aws2024/qrcode.webp" alt="qrcode" /></p>

<h2 id="èµ›äº‹å¥–åŠ±">èµ›äº‹å¥–åŠ±</h2>

<p><img src="/assets/2024/04-wechaty-with-aws2024/awards.webp" alt="awards" /></p>

<h2 id="èµ›ç¨‹å®‰æ’">èµ›ç¨‹å®‰æ’</h2>

<p><img src="/assets/2024/04-wechaty-with-aws2024/schedule.webp" alt="schedule" /></p>

<h2 id="èµ›äº‹ç»„ç»‡">èµ›äº‹ç»„ç»‡</h2>

<p><img src="/assets/2024/04-wechaty-with-aws2024/org.webp" alt="org" /></p>

<h3 id="aws">AWS</h3>

<p>Amazon Web Servicesï¼ˆAWSï¼‰æ˜¯å…¨çƒæœ€å…¨é¢ã€åº”ç”¨æœ€å¹¿æ³›çš„äº‘ï¼Œä»å…¨çƒæ•°æ®ä¸­å¿ƒæä¾›è¶…è¿‡ 200 é¡¹åŠŸèƒ½é½å…¨çš„æœåŠ¡ã€‚æ•°ç™¾ä¸‡å®¢æˆ·ï¼ˆåŒ…æ‹¬å¢é•¿æœ€å¿«é€Ÿçš„åˆåˆ›å…¬å¸ã€æœ€å¤§å‹ä¼ä¸šå’Œä¸»è¦çš„æ”¿åºœæœºæ„ï¼‰éƒ½åœ¨ä½¿ç”¨ AWS æ¥é™ä½æˆæœ¬ã€æé«˜æ•æ·æ€§å¹¶åŠ é€Ÿåˆ›æ–°ã€‚</p>

<p>ä½“éªŒ AWS è¯·å‰å¾€ï¼š<a href="https://aws.amazon.com/cn/what-is-aws/?nc1=f_cc">AWSäº‘è®¡ç®—</a></p>

<h3 id="wechaty">Wechaty</h3>

<p>Wechaty æ˜¯ä¸€ä¸ªå¼€æºèŠå¤©æœºå™¨äººæ¡†æ¶SDKï¼Œå…·æœ‰å¤šå¹³å°ã€å¤šè¯­è¨€å’Œå¤šæ’ä»¶çš„ç‰¹æ€§ï¼Œæ”¯æŒPython, Go, Java, Scala, .NET, PHP, Rust ç­‰å¤šè¯­è¨€ç‰ˆæœ¬ï¼Œé€šè¿‡å‡ è¡Œä»£ç å³å¯åˆ›å»ºä¸€ä¸ªèŠå¤©æœºå™¨äººã€‚ç»è¿‡5å¹´å¤šçš„å‘å±•ï¼Œç°åœ¨Wechatyå¼€æºç¤¾åŒºå·²æ‹¥æœ‰æ•°åä½Committersï¼Œç™¾ä½™ä½Contributorsï¼Œå¹¶è¢«ä¸‡åGithubå¼€å‘è€…Starã€‚ç›®å‰ï¼ŒWechatyçš„å¼€å‘è€…å·²éå¸ƒå…¨çƒå¤šä¸ªå›½å®¶å’Œåœ°åŒºï¼Œè¦†ç›–æ•°ä¸‡äººï¼Œæ˜¯å›½å†…æœ€æ´»è·ƒçš„Conversational AI Chatbot å¼€å‘è€…ç¤¾åŒºã€‚</p>

<p>Wechatyçš„ä¼˜åŠ¿åœ¨äºå¯¹ä»£ç è´¨é‡åœ°ç®¡ç†ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨äº†Github Actionsåœ°DevOpså·¥å…·å®Œæˆäº†CI/CDå·¥ä½œæµï¼Œä»è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•åˆ°è‡ªåŠ¨æ‰“åŒ…é›†æˆæµ‹è¯•ï¼Œä»è‡ªåŠ¨å‘å¸ƒNPMåŒ…åˆ°è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒå¯¹åº”ç‰ˆæœ¬åœ°Docker Imageï¼Œå®ç°äº†å…¨è‡ªåŠ¨åœ°ç¤¾åŒºä»£ç å‘å¸ƒï¼Œæå¤§åœ°æé«˜äº†ç¤¾åŒºåœ°ååŒæ•ˆç‡ã€‚</p>

<p>ç›®å‰ï¼Œåœ¨Githubä¸Šå·²æœ‰åƒä½™ä¸ªå¼€æºé¡¹ç›®åŸºäºWechatyæ„å»ºäº†èŠå¤©æœºå™¨äººã€‚å¦å¤–ï¼ŒWechatyç»Ÿä¸€äº†å³æ—¶é€šè®¯è½¯ä»¶å¹³å°çš„å¯¹è¯æ¥å£ï¼Œä»…éœ€è¦ä¸€å¥—ä»£ç å³å¯è¿è¡Œåœ¨å¤šä¸ªå¹³å°ä¹‹ä¸Šï¼Œç›®å‰å·²æˆç†Ÿé«˜æ•ˆåœ°æ¨åŠ¨äº†åŒ…æ‹¬ç¤¾ç¾¤ç®¡ç†ã€æ•°æ®è¿ç»´ã€åŠå…¬ã€èµ„è®¯ã€å¹¿å‘Šã€è¥é”€ç­‰å¤šä¸ªé¢†åŸŸä¸åŒå®ç”¨åœºæ™¯çš„è½åœ°ã€‚</p>

<p>æœºé‡ç¨çºµå³é€ï¼Œä½ è¿˜åœ¨ç­‰ä»€ä¹ˆï¼Ÿç°åœ¨å°±è¡ŒåŠ¨å§ï¼Œå¡«å†™æŠ¥åä¿¡æ¯ã€‚ç¿˜é¦–ä»¥å¾…ä½ çš„åˆ°æ¥ï¼Œèµ¢å–è¿™åœºæŒ‘æˆ˜èµ›çš„æ¡‚å† è£è€€ï¼</p>

<p>âœ¨ æ¯”èµ›çš„æˆ˜é¼“å·²ç»æ“‚å“</p>

<p>âœ¨ æ¬¢è¿æ‚¨æŠ¥åå‚èµ›</p>

<p>âœ¨ åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½å³°ä¼šç°åœºå·…å³°ç›¸è§</p>

<p>âœ¨ å…±åŒçªç ´æé™ï¼Œä¸º AI è€Œæˆ˜ï¼</p>

<p><a href="https://mp.weixin.qq.com/s/kDyn9qL54jr7NCKg--RIvA">é˜…è¯»åŸæ–‡</a></p>]]></content><author><name>aiamber</name></author><category term="article" /><category term="aws" /><category term="ai" /><category term="news" /><category term="featured" /><category term="chatbot" /><category term="competition" /><summary type="html"><![CDATA[âœ¨ ç¬¬äºŒå±Šä¸­å›½ç”Ÿæˆå¼ AI åˆ›æ–°åº”ç”¨æŒ‘æˆ˜èµ› âœ¨ è§è¯ä¸‹ä¸€æ‰¹ç‹¬è§’å…½çš„è¯ç”Ÿï¼ é˜…è¯»åŸæ–‡]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2024/04-wechaty-with-aws2024/main.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2024/04-wechaty-with-aws2024/main.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">åˆ©ç”¨ Dify æ„å»ºåŸºäº GPT-4 Turbo çš„æ™ºèƒ½ Agent,å®ç°åŒ»ç–—å¾®ä¿¡æœºå™¨äºº</title><link href="https://wechaty.js.org/2024/03/30/wechatbot-with-wechaty-dify-gpt4/" rel="alternate" type="text/html" title="åˆ©ç”¨ Dify æ„å»ºåŸºäº GPT-4 Turbo çš„æ™ºèƒ½ Agent,å®ç°åŒ»ç–—å¾®ä¿¡æœºå™¨äºº" /><published>2024-03-30T00:00:00+00:00</published><updated>2024-03-30T00:00:00+00:00</updated><id>https://wechaty.js.org/2024/03/30/wechatbot-with-wechaty-dify-gpt4</id><content type="html" xml:base="https://wechaty.js.org/2024/03/30/wechatbot-with-wechaty-dify-gpt4/"><![CDATA[<blockquote>
  <p>ä½œè€…: <a href="https://github.com/gscfwid/">gscfwid</a>ï¼ŒAn anesthetist in a big ship of mainland.</p>
</blockquote>

<p>å¤§å®¶å¥½,æˆ‘æ˜¯ä¸€ååŒ»ç”Ÿ,åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæŠ€æœ¯çˆ±å¥½è€…ã€‚ä»Šå¤©æˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘æœ€è¿‘çš„ä¸€ä¸ªé¡¹ç›®â€”â€”åˆ©ç”¨ Dify æ„å»ºåŸºäº GPT-4 Turbo çš„æ™ºèƒ½ Agent,å®ç°é«˜çº§å¾®ä¿¡èŠå¤©æœºå™¨äººã€‚</p>

<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©å¾®ä¿¡æœºå™¨äºº">ä¸ºä»€ä¹ˆé€‰æ‹©å¾®ä¿¡æœºå™¨äºº</h2>

<p>é¦–å…ˆ,æˆ‘æƒ³è¯´ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªæœºå™¨äººã€‚ä½œä¸ºä¸€ååŒ»ç”Ÿ,æˆ‘çš„ä¸€é¡¹é‡è¦å·¥ä½œæ˜¯éšè®¿ç—…äºº,äº†è§£ä»–ä»¬æœ¯åçš„æ¢å¤æƒ…å†µã€‚æˆ‘ä»¬åŒ»é™¢æ¯å¹´æœ‰ 7-8 ä¸‡çš„æ‰‹æœ¯é‡,äººå·¥ç”µè¯éšè®¿æ˜¯éå¸¸ä¸ç°å®çš„ã€‚è€Œä¸”,ç°åœ¨è¿è¥å•†å¯¹ç”µè¯çš„é™åˆ¶ä¹Ÿæ¯”è¾ƒä¸¥æ ¼ã€‚æˆ‘å‘ç°,å¯¹äºç—…äººæ¥è¯´,å¾®ä¿¡å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å®¹æ˜“æ¥å—çš„éšè®¿æ–¹å¼,å› ä¸ºå®ƒä¸ä¼šæ˜¾å¾—æ‰“æ‰°åˆ°ä»–ä»¬çš„ç”Ÿæ´»ã€‚</p>

<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-wechaty">ä¸ºä»€ä¹ˆé€‰æ‹© Wechaty</h2>

<p>ç„¶è€Œ,å¸‚é¢ä¸Šå¤§å¤šæ•°å¾®ä¿¡æœºå™¨äººæ¡†æ¶éƒ½æ˜¯åŸºäº web åè®®çš„,è€Œç›®å‰ web åè®®åŸºæœ¬å¤„äºä¸å¯ç”¨çš„çŠ¶æ€ã€‚ä¾‹å¦‚,è™½ç„¶ wechaty å¯ä»¥åˆ©ç”¨ UOS ä¸Šä¿ç•™çš„ web åè®®,ä½†å®ƒæ— æ³•è·å–æ°¸ä¹…çš„ IDã€å¤‡æ³¨ã€tag ç­‰æ•°æ®,è¿™å¯¹éšè®¿å·¥ä½œéå¸¸ä¸åˆ©ã€‚åœ¨å°è¯•äº† padlocal åè®®å,æˆ‘è§‰å¾—å®ƒéå¸¸é€‚åˆæˆ‘çš„éœ€æ±‚ã€‚</p>

<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-dify">ä¸ºä»€ä¹ˆé€‰æ‹© Dify</h2>

<p>æ¥ä¸‹æ¥,æˆ‘æƒ³è¯´ä¸€ä¸‹ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨ Dify æ¥æ„å»ºè¿™ä¸ªæœºå™¨äººã€‚é¦–å…ˆ,æˆ‘å¸Œæœ›è¿™ä¸ªæœºå™¨äººä¸ä»…èƒ½å®Œæˆéšè®¿ä»»åŠ¡,è¿˜èƒ½æˆä¸ºä¸€ä¸ªé¢å‘ç—…äººçš„åŒ»å­¦ç§‘æ™®æœºå™¨äººã€‚éšç€å¤§è¯­è¨€æ¨¡å‹çš„çˆ†å‘,è¿™ä¸ªæƒ³æ³•å˜å¾—éå¸¸å®¹æ˜“å®ç°ã€‚åˆ©ç”¨ wechaty å’Œå¤§æ¨¡å‹çš„ API,æˆ‘å¾ˆå¿«å°±æ„æ€å‡ºäº†ä¸€ä¸ªåˆæ­¥çš„æ¡†æ¶ã€‚</p>

<p>Dify æ˜¯ä¸€ä¸ªçŸ¥åçš„å¤§æ¨¡å‹ Agent å¹³å°,å®ƒå¯¹ API çš„å°è£…è¦æ¯” OpenAI å®˜æ–¹çš„ API æ›´åŠ å‹å¥½,ä¾‹å¦‚åœ¨ prompt çš„æ„å»ºå’Œå¯¹è¯çº¿ç¨‹çš„ä¿æŒæ–¹é¢ã€‚è™½ç„¶ OpenAI ä¹Ÿå¯ä»¥æ„å»º assistant,ä½†æ˜¯ä¿æŒå¯¹è¯ä¼¼ä¹æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ã€‚å¦å¤–,Dify å¹³å°æœ¬èº«ä¹Ÿæ„å»ºäº†ä¸€äº›æ’ä»¶,æ¯”å¦‚ Google æœç´¢,å¯ä»¥å¾ˆå®¹æ˜“é›†æˆåˆ° API ä¸­ã€‚å› æ­¤,æˆ‘æœ€ç»ˆé€‰æ‹©äº† Dify ä½œä¸ºæˆ‘çš„å¼€å‘å¹³å°ã€‚
ä»¥ä¸Šå°±æ˜¯æˆ‘å¼€å‘è¿™ä¸ªå¾®ä¿¡åŒ»ç–—éšè®¿æœºå™¨äººçš„ä¸€äº›èƒŒæ™¯å’Œæ€è·¯ã€‚ä½œä¸ºä¸€ä¸ªåŒ»ç”Ÿå’ŒæŠ€æœ¯å°ç™½,æˆ‘å¸Œæœ›é€šè¿‡åˆ†äº«è‡ªå·±çš„é¡¹ç›®ç»å†,èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›å¯å‘å’Œæ€è€ƒã€‚åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†,æˆ‘ä¼šå’Œå¤§å®¶èŠèŠè¿™ä¸ªæœºå™¨äººçš„ä¸€äº›æŠ€æœ¯ç»†èŠ‚,æ¬¢è¿å¤§å®¶æå‡ºå®è´µçš„æ„è§å’Œå»ºè®®ã€‚</p>

<h2 id="é€šè¿‡-dify-åˆ›å»ºåŸºäº-gpt-4-turbo-çš„æ¨¡å‹">é€šè¿‡ Dify åˆ›å»ºåŸºäº GPT-4 Turbo çš„æ¨¡å‹</h2>

<p>Dify æä¾›äº†ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ç•Œé¢,è®©æˆ‘å¯ä»¥å¿«é€Ÿåœ°åˆ›å»ºå’Œæµ‹è¯•æ¨¡å‹ã€‚
é¦–å…ˆ,æˆ‘åœ¨ Dify å¹³å°ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åº”ç”¨,å¹¶é€‰æ‹©äº† GPT-4 Turbo ä½œä¸ºåŸºç¡€æ¨¡å‹ã€‚åœ¨è¿™ä¸ªåˆå§‹é˜¶æ®µ,æˆ‘æš‚æ—¶æ²¡æœ‰ä½¿ç”¨ä»»ä½•è‡ªå®šä¹‰çš„ prompt æˆ–æ’ä»¶,åªæ˜¯æƒ³å…ˆåšä¸€ä¸ªç®€å•çš„æµ‹è¯•,çœ‹çœ‹æ¨¡å‹çš„æ€§èƒ½å¦‚ä½•ã€‚</p>

<p>åˆ›å»ºåº”ç”¨å,Dify ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª API å¯†é’¥(API key),æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¯†é’¥æ¥è°ƒç”¨ Dify çš„ API æ¥å£,ä¸æˆ‘ä»¬åˆ›å»ºçš„æ™ºèƒ½å¯¹è¯æ¨¡å‹è¿›è¡Œäº¤äº’ã€‚</p>

<h2 id="ä½¿ç”¨-wechaty-å®ç°å¾®ä¿¡æœºå™¨äºº">ä½¿ç”¨ Wechaty å®ç°å¾®ä¿¡æœºå™¨äºº</h2>

<p>æœ‰äº†æ™ºèƒ½å¯¹è¯æ¨¡å‹,æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¹³å°æ¥å®ç°å¾®ä¿¡æœºå™¨äºº,å°†æ¨¡å‹é›†æˆåˆ°å¾®ä¿¡ä¸­ã€‚è¿™é‡Œæˆ‘é€‰æ‹©äº† Wechatyã€‚Wechaty æ˜¯ä¸€ä¸ªå¼€æºçš„å¯¹è¯æœºå™¨äºº SDK,æ”¯æŒä¸ªäººå¾®ä¿¡å·,ä½¿ç”¨ Node.js å’Œ TypeScript æ„å»ºã€‚</p>

<p>ä¸‹é¢æ˜¯æˆ‘çš„ä»£ç å®ç°,ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:</p>

<p>é¦–å…ˆ,æˆ‘ä½¿ç”¨ wechaty-puppet-padlocal ä½œä¸º Wechaty çš„ Puppet Provider,å®ƒé€šè¿‡ iPad åè®®è¿æ¥å¾®ä¿¡,ç›¸æ¯” Web åè®®æ›´åŠ ç¨³å®šå¯é ã€‚ç„¶åä½¿ç”¨ WechatyBuilder æ¥æ„å»ºæˆ‘ä»¬çš„æœºå™¨äººå®ä¾‹ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// åˆå§‹åŒ–Wechaty</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">PuppetPadlocal</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">wechaty-puppet-padlocal</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">WechatyBuilder</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">wechaty</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">puppet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PuppetPadlocal</span><span class="p">({</span>
  <span class="na">token</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PUPPET_PADLOCAL_TOKEN</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">bot</span> <span class="o">=</span> <span class="nx">WechatyBuilder</span><span class="p">.</span><span class="nf">build</span><span class="p">({</span> <span class="nx">puppet</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<p>æ¥ä¸‹æ¥è°ƒç”¨ Dify API çš„æ ¸å¿ƒå‡½æ•°ã€‚æˆ‘ä½¿ç”¨ axios åº“å‘é€ POST è¯·æ±‚åˆ° Dify çš„ API ç«¯ç‚¹,ä¼ å…¥ç”¨æˆ·çš„è¾“å…¥æ¶ˆæ¯ã€å¯¹è¯ ID ç­‰å‚æ•°,å¹¶é€šè¿‡ API Key è¿›è¡Œèº«ä»½éªŒè¯ã€‚Dify ä¼šè¿”å›æ™ºèƒ½å¯¹è¯æ¨¡å‹ç”Ÿæˆçš„å›å¤ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// è°ƒç”¨Dify APIçš„å‡½æ•°</span>
<span class="kd">const</span> <span class="nx">difyApiKey</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DIFY_API_KEY</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">difyApiUrl</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.dify.ai/v1/chat-messages</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nf">sendMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">userName</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
      <span class="nx">difyApiUrl</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">inputs</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">query</span><span class="p">:</span> <span class="nx">message</span><span class="p">,</span>
        <span class="na">response_mode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">streaming</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">conversation_id</span><span class="p">:</span> <span class="nx">conversationData</span><span class="p">.</span><span class="nx">conversationId</span><span class="p">,</span>
        <span class="na">user</span><span class="p">:</span> <span class="nx">userName</span><span class="p">,</span>
        <span class="na">files</span><span class="p">:</span> <span class="p">[],</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">Authorization</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">difyApiKey</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">}</span>
    <span class="p">);</span>
    <span class="c1">// Process response...</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">Dify API responded with status code:</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">No response received from Dify API:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">request</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error setting up request to Dify API:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// Handle error appropriately...</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æœ€å,æˆ‘ç›‘å¬ Wechaty çš„ message äº‹ä»¶,å½“æ”¶åˆ°ç”¨æˆ·åœ¨ç¾¤èŠä¸­@æœºå™¨äººçš„æ¶ˆæ¯æ—¶,æå–å‡ºæ¶ˆæ¯å†…å®¹,è°ƒç”¨ sendMessage å‡½æ•°è·å–æ™ºèƒ½å›å¤,ç„¶åé€šè¿‡ room.say å°†å›å¤å‘é€åˆ°ç¾¤èŠä¸­ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ç›‘å¬æ¶ˆæ¯äº‹ä»¶</span>
<span class="nx">bot</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="k">async </span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// è·å–å‘æ¶ˆæ¯äººçš„ä¿¡æ¯</span>
  <span class="kd">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nf">talker</span><span class="p">().</span><span class="nx">id</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">room</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nf">room</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">userName</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nf">name</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nf">text</span><span class="p">();</span>
  <span class="c1">// åˆ¤æ–­å®ƒæ˜¯å¦åœ¨æˆ‘å·²ç»åˆ›å»ºå¥½çš„SQLiteæ•°æ®åº“ä¸­</span>
  <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">room</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">SELECT * FROM contacts WHERE id = ?</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">row</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="p">[</span><span class="nx">id</span><span class="p">]);</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">row</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">reply</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">sendMessage</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">userName</span><span class="p">);</span>
        <span class="k">await</span> <span class="nx">message</span><span class="p">.</span><span class="nf">talker</span><span class="p">().</span><span class="nf">say</span><span class="p">(</span><span class="nx">reply</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>è¿™é‡Œéœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘åˆ©ç”¨ Dify API ä¸­çš„ conversation_id æ¥å®ç°ä¿æŒå¯¹è¯çš„åŠŸèƒ½ã€‚è¿™éƒ¨åˆ†ä»£ç ä¸»è¦åœ¨ sendMessage å‡½æ•°ä¸­:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">conversationMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">();</span> <span class="c1">// åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ¥ä¿å­˜æé—®è€…çš„ä¿¡æ¯å’Œconversation_id</span>
<span class="kd">const</span> <span class="nx">CONVERSATION_EXPIRATION</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// è®¾å®šconversationçš„ä¿æŒæ—¶é—´ï¼Œè®¾å®šä¸º5åˆ†é’Ÿ</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">sendMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">userName</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="kd">let</span> <span class="nx">conversationData</span> <span class="o">=</span> <span class="nx">conversationMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">userName</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">();</span>

  <span class="c1">// å¦‚æœä¼šè¯ä¸å­˜åœ¨æˆ–å·²è¿‡æœŸ,åˆ™åˆ›å»ºæ–°çš„ä¼šè¯</span>
  <span class="k">if </span><span class="p">(</span>
    <span class="o">!</span><span class="nx">conversationData</span> <span class="o">||</span>
    <span class="nx">timestamp</span> <span class="o">-</span> <span class="nx">conversationData</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">&gt;</span> <span class="nx">CONVERSATION_EXPIRATION</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="nx">conversationData</span> <span class="o">=</span> <span class="p">{</span> <span class="na">conversationId</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">timestamp</span> <span class="p">};</span>
    <span class="nx">conversationMap</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">userName</span><span class="p">,</span> <span class="nx">conversationData</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
    <span class="nx">difyApiUrl</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="c1">// ...</span>
      <span class="na">conversation_id</span><span class="p">:</span> <span class="nx">conversationData</span><span class="p">.</span><span class="nx">conversationId</span><span class="p">,</span>
      <span class="na">user</span><span class="p">:</span> <span class="nx">userName</span><span class="p">,</span>
      <span class="c1">// ...</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
  <span class="p">);</span>

  <span class="c1">// æ›´æ–°ä¼šè¯IDå’Œæ—¶é—´æˆ³</span>
  <span class="nx">conversationData</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">=</span> <span class="nx">timestamp</span><span class="p">;</span>

  <span class="c1">// ...</span>
  <span class="c1">// ä¸‹é¢çš„ä»£ç æ˜¯ç”±äºä½¿ç”¨äº†streamæ¨¡å¼æ¥è·å–Difyçš„responseï¼Œæ‰€ä»¥æˆ‘éœ€è¦éå†å®ƒçš„æ¯ä¸ªå›å¤ï¼Œæ‰¾åˆ°æœ€ç»ˆçš„å›å¤å†…å®¹</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">line</span> <span class="k">of</span> <span class="nx">lines</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">data:</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nf">trim</span><span class="p">());</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">event</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">agent_thought</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
        <span class="nx">conversationData</span><span class="p">.</span><span class="nx">conversationId</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">conversation_id</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>é€šè¿‡è¿™ç§æ–¹å¼,æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è¯ä¸Šä¸‹æ–‡,å®ç°å¤šè½®å¯¹è¯ã€‚å½“ç”¨æˆ·åœ¨ä¸€å®šæ—¶é—´å†…(è¿™é‡Œè®¾ç½®ä¸º 5 åˆ†é’Ÿ)ç»§ç»­å‘é€æ¶ˆæ¯æ—¶,å°±å¯ä»¥ä¿æŒä¸Šä¸‹æ–‡è¿è´¯;å¦‚æœè¶…è¿‡äº†è¿™ä¸ªæ—¶é—´,å°±ä¼šå¼€å§‹ä¸€ä¸ªæ–°çš„å¯¹è¯ã€‚</p>

<p>æ¥ä¸‹æ¥çš„è®¾ç½®å°±éƒ½æ˜¯åœ¨ Dify å¹³å°äº†ï¼Œç›®å‰æˆ‘è¿˜åœ¨åˆ¶ä½œä¸­ã€‚æˆ‘è®¾æƒ³æ˜¯ä¸Šä¼ ä»ç½‘ç»œä¸­ä¸‹è½½çš„ç§‘æ™®æ–‡ç« ä½œä¸ºçŸ¥è¯†åº“ï¼Œé™å®š GPT-4 åªåœ¨çŸ¥è¯†åº“ä¸­ä½œç­”ã€‚Anywayï¼Œå°±ä¸å±äºæŠ€æœ¯è®¨è®ºçš„èŒƒç•´äº†ã€‚</p>

<p>ä»¥ä¸Šå°±æ˜¯åˆ©ç”¨ Dify å’Œ Wechaty å®ç°å¾®ä¿¡æ™ºèƒ½å¯¹è¯æœºå™¨äººçš„æ ¸å¿ƒä»£ç ã€‚é€šè¿‡ Dify å¼ºå¤§çš„å¯¹è¯æ¨¡å‹å’Œ Wechaty æ–¹ä¾¿çš„å¾®ä¿¡é›†æˆ,æˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ªå®ç”¨çš„åŒ»ç–—ç§‘æ™®æœºå™¨äººã€‚å½“ç„¶,è¿™åªæ˜¯ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬,æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šåŠŸèƒ½,å¦‚è‡ªå®šä¹‰ promptã€çŸ¥è¯†åº“æœç´¢ç­‰,æ¥è¿›ä¸€æ­¥æå‡æœºå™¨äººçš„æ™ºèƒ½åŒ–æ°´å¹³ã€‚</p>]]></content><author><name>gscfwid</name></author><category term="article" /><category term="dify" /><category term="gpt4-turbo" /><summary type="html"><![CDATA[ä½œè€…: gscfwidï¼ŒAn anesthetist in a big ship of mainland.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2024/03-wechatbot-with-wechaty-dify-gpt4/bp-post.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2024/03-wechatbot-with-wechaty-dify-gpt4/bp-post.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">2024GDC: Wechaty Showcasing the Power of AI and Automation at GDC 2024</title><link href="https://wechaty.js.org/2024/03/26/wechaty-in-2024gdc/" rel="alternate" type="text/html" title="2024GDC: Wechaty Showcasing the Power of AI and Automation at GDC 2024" /><published>2024-03-26T00:00:00+00:00</published><updated>2024-03-26T00:00:00+00:00</updated><id>https://wechaty.js.org/2024/03/26/wechaty-in-2024gdc</id><content type="html" xml:base="https://wechaty.js.org/2024/03/26/wechaty-in-2024gdc/"><![CDATA[<p><img src="/assets/2024/03-wechaty-in-2024gdc/2024gdc-a.webp" alt="2024gdc-a.webp" /></p>

<p>On March 23-24, representing the Wechaty open-source community, I attended the <a href="https://my.globalaidc.com/pc/page/b4070000-a7d2-36dc-08e0-08dc1af77df3?theme=bvent">â€œ2024 Global Developer Conferenceâ€ (GDC)</a> in Shanghai.
<img src="/assets/2024/03-wechaty-in-2024gdc/me-a.webp" alt="me-a.webp" /></p>

<p><a href="https://wechaty.js.org">Wechaty</a>, as the worldâ€™s largest conversational RPA framework, currently has nearly 20,000 stars on GitHub. The contributors to its code come from over 20 countries and regions worldwide, providing a concise and powerful instant messaging (IM) integration solution to developers globally.
<img src="/assets/2024/03-wechaty-in-2024gdc/me-b.webp" alt="me-b.webp" /></p>

<p>At GDC, I provided in-depth explanations and demonstrations on how to combine artificial intelligence with automation using Wechaty, covering everything from coding implementation to practical applications, showcasing the impressive flexibility of Wechaty.
<img src="/assets/2024/03-wechaty-in-2024gdc/wechaty.webp" alt="wechaty.webp" /></p>

<p>Additionally, in response to the call to â€œencourage womenâ€™s participation in technology,â€ as a Wechaty advocate, I supported a female fan who is a chatbot developer in delivering a fantastic presentation to a global audience.
<img src="/assets/2024/03-wechaty-in-2024gdc/pre-schedule.webp" alt="pre-schedule.webp" />
<img src="/assets/2024/03-wechaty-in-2024gdc/pre.webp" alt="pre.webp" /></p>

<h2 id="pictures">pictures</h2>

<p><img src="/assets/2024/03-wechaty-in-2024gdc/2024gdc-b.webp" alt="2024gdc-b.webp" />
<img src="/assets/2024/03-wechaty-in-2024gdc/me-c.webp" alt="me-c.webp" />
<img src="/assets/2024/03-wechaty-in-2024gdc/me-d.webp" alt="me-d.webp" />
<img src="/assets/2024/03-wechaty-in-2024gdc/me-e.webp" alt="me-e.webp" /></p>

<h2 id="ppt">PPT</h2>

<div style="
    position: relative;
    padding-bottom: 56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="https://docs.google.com/presentation/d/1dtjNqRjlg8QTeeNyGUIkgcRRT6awNpOjTx1zMrs_0pY/edit?usp=sharing" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>]]></content><author><name>aiamber</name></author><category term="announcement" /><category term="news" /><category term="ecosystem" /><category term="wechaty-way" /><summary type="html"><![CDATA[]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2024/03-wechaty-in-2024gdc/title.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2024/03-wechaty-in-2024gdc/title.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Unveiling the Treasures of Collaboration: My Wechaty GSoDâ€™21 Gifts</title><link href="https://wechaty.js.org/2024/02/18/wechaty-gsod-gifts/" rel="alternate" type="text/html" title="Unveiling the Treasures of Collaboration: My Wechaty GSoDâ€™21 Gifts" /><published>2024-02-18T00:00:00+00:00</published><updated>2024-02-18T00:00:00+00:00</updated><id>https://wechaty.js.org/2024/02/18/wechaty-gsod-gifts</id><content type="html" xml:base="https://wechaty.js.org/2024/02/18/wechaty-gsod-gifts/"><![CDATA[<p>Hello, friends and fellow tech enthusiasts!</p>

<p>I remember feeling a rush as I opened the unexpected package from the Wechaty folks. It felt like <strong>Christmas morning</strong>, even though it was just a regular Tuesday. <a href="https://github.com/huan">Huan</a>, who mentored me through Google Season of Docs, had something to do with thisâ€¦I just knew it!</p>

<p>This wasnâ€™t just a box. It was like holding a trophy for something far more important than code or project completion.  It held proof of all those thrilling â€œa-ha!â€ moments, those times we brainstormed solutions until our heads throbbed, and the deep satisfaction of making something great together.</p>

<p>Each trinket in that box whispered a story â€“ late night debates that led to amazing features, helping each other through hurdles, learning and laughing at the same time. And <a href="https://github.com/huan">Huan</a>, he always seemed to know when I needed an extra jolt of confidence. Those memories flooded back when I saw the gifts.</p>

<p>More than anything, that package reminded me why I love open source. Sure, we create fantastic technologies, but most importantly, we create connections. These arenâ€™t just online friendships, they feel more real than that. And sometimes, real means sending care packages across the globe to say, â€œHey, remember how awesome we are?â€</p>

<p>Google Season of Docs was more than a career thing, it felt personal. Every challenge, every victory, shaped me somehow. This kind of open, global collaboration just isnâ€™t possible many other places. We made something cool, yes, but we also learned how to truly work as a team.</p>

<p>I am so grateful for <a href="https://github.com/huan">Huan</a>, for the Wechaty crew, and for every strange and wonderful person Iâ€™ve met in this open-source world. These treasures will sit near my computer as a reminder: thereâ€™s nothing we canâ€™t do when we join forces.  Bring on more sleepless nights, head-spinning problems, and breakthroughs beyond measure â€“ Iâ€™ll face them all with the strength of this awesome community at my back.</p>

<h2 id="the-heartfelt-reveal">The Heartfelt Reveal</h2>

<p>The day the package arrived marked a departure from the ordinary, turning into a celebration of the extraordinary efforts and connections forged during the Google Season of Docs. The unboxing was a moment of reflection and gratitude, each item unwrapped a symbol of the milestones weâ€™ve reached together.</p>

<ul>
  <li><strong>The Certificate:</strong> This wasnâ€™t just any certificate; it was a green-bordered testament to the journey undertaken, with my name, Sajen Saravjith Karthikeyan, proudly displayed. This certificate, now adorning my wall, stands as a symbol of our collective accomplishments and the communityâ€™s appreciation of the contributions made.</li>
  <li><strong>The Pin:</strong> Beyond its sleek design, the Wechaty pin symbolizes the unity and honor of being part of something greaterâ€”a community committed to pushing the boundaries of whatâ€™s possible with open-source collaboration.</li>
  <li><strong>The USB Drive:</strong> This device, while practical in function, holds a deeper meaningâ€”itâ€™s a compendium of past achievements and a beacon for future endeavors, embodying the essence of our shared journey and the promise of what lies ahead.</li>
  <li><strong>The Stickers:</strong> More than mere adornments, these Wechaty stickers are a vibrant declaration of our communityâ€™s spirit, adding a personal and playful touch to my workspace and serving as a daily reminder of the joy and collaboration that define Wechaty.</li>
</ul>

<h2 id="a-salute-to-mentorship-the-role-of-guidance-and-inspiration">A Salute to Mentorship: The Role of Guidance and Inspiration</h2>

<p>I canâ€™t talk about the GSoD season without a huge shoutout to <a href="https://github.com/huan">Huan</a>. In recounting this incredible journey, itâ€™s imperative to highlight the pivotal role of mentorshipâ€”specifically, the guidance and inspiration provided by <a href="https://github.com/huan">Huan</a>. His mentorship transcended traditional boundaries, fostering an environment rich with learning and creativity. <a href="https://github.com/huan">Huanâ€™s</a> expertise, passion, and leadership not only illuminated the path but also made the journey an unforgettable adventure.</p>

<h2 id="wechatys-welcoming-gateway-a-collaborative-masterpiece">Wechatyâ€™s Welcoming Gateway: A Collaborative Masterpiece</h2>

<p>Our endeavors during the Google Season of Docs went beyond mere documentation. It was a collective push towards innovation, resulting in the transformation of the Wechaty landing page into a welcoming portal for newcomersâ€”a beacon of our teamwork and the collaborative spirit that drives our community.</p>

<p>Google Season of Docs 2021 with wechaty was an immersive adventure; it pushed boundaries, taught me skills I hadnâ€™t imagined and howed me what it means to truly own a project. The revamped Wechaty landing page feels like a win every time I see it. We built an inviting on-ramp for people who want to explore and become part of our amazing community.</p>

<h2 id="the-symphony-of-collaboration-celebrating-collective-effort">The Symphony of Collaboration: Celebrating Collective Effort</h2>

<p>The success weâ€™ve celebrated is not the product of individual effort but the result of a harmonious symphony of contributions from every corner of the Wechaty community. To every contributor, user, and supporter who has engaged with our initiativesâ€”your participation has been the ultimate reward, fueling our progress and enriching our community.</p>

<p>This work only shines because of everyone who dives into Wechaty. Every â€œaha!â€ moment, every problem solved, every newcomer who jumps in - thatâ€™s the fuel that fires up phenomenal projects! Hereâ€™s to all of you for pushing this community to do extraordinary things.</p>

<h2 id="looking-ahead-a-future-filled-with-potential">Looking Ahead: A Future Filled with Potential</h2>

<p>These gifts arenâ€™t just cool swagâ€”theyâ€™re reminders of what weâ€™ve done and whatâ€™s still to come. Theyâ€™re not just for me; theyâ€™re for all of us in the Wechaty community who keep pushing forward, making things better one line of code at a time.</p>

<p>The gifts from the Wechaty community symbolize more than achievements; they represent the ongoing journey of innovation, collaboration, and growth. They remind us of our shared past and inspire us towards a future brimming with possibilities. As we forge ahead, these tokens of appreciation serve as a constant reminder of the power of community and the endless potential that lies in collective endeavor.</p>

<p>As we raise our glasses to the future, let us do so with a deep sense of gratitude and anticipation for what lies ahead. To <a href="https://github.com/huan">Huan</a>, <a href="https://github.com/lijiarui">Rui</a>, and every member of the Wechaty communityâ€”thank you for an extraordinary Google Season of Docs experience. Hereâ€™s to continued innovation, collaboration, and the joy of building something greater, together.</p>

<p>â€œLetâ€™s march forward, not just as individual contributors but as a unified force, shaping the future of open-source technology with every line of code and every piece of documentation we craft. To innovation, to collaboration, to the endless journey of discoveryâ€”cheers to us all!â€</p>]]></content><author><name>sajenjeshan1222</name></author><category term="gsod" /><category term="google" /><category term="gsod" /><category term="gifts" /><summary type="html"><![CDATA[Hello, friends and fellow tech enthusiasts!]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2024/02-wechaty-gsod-gifts/gsod-wechaty-gifts.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2024/02-wechaty-gsod-gifts/gsod-wechaty-gifts.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">TensorFlow.js: Machine Learning in JavaScript</title><link href="https://wechaty.js.org/2024/02/05/devfest-silicon-valley-google-developer-group-tensorflow-js/" rel="alternate" type="text/html" title="TensorFlow.js: Machine Learning in JavaScript" /><published>2024-02-05T00:00:00+00:00</published><updated>2024-02-05T00:00:00+00:00</updated><id>https://wechaty.js.org/2024/02/05/devfest-silicon-valley-google-developer-group-tensorflow-js</id><content type="html" xml:base="https://wechaty.js.org/2024/02/05/devfest-silicon-valley-google-developer-group-tensorflow-js/"><![CDATA[<blockquote>
  <p>Huan takes us on a journey into the world of machine learning right in your browser with TensorFlow.js. Whether youâ€™re a developer, tech enthusiast, or just curious about the intersection of JavaScript and ML, this talk is a must-watch!<br />
â€” <a href="https://www.youtube.com/@GDGSiliconValley">GDG Silicon Valley</a></p>
</blockquote>

<p><img src="/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/group-photo-dev-fest-silicon-valley-nov-16-2023.webp" alt="DevFest Silicon Valley 2023" /></p>

<p>Huan Li, Google Developer Expert, will be delivering a session on â€œTensorFlow.js: Machine Learning in JavaScript.â€ Discover how to integrate machine learning directly into your web projects using TensorFlow.js, and harness the power of ML in the versatile environment of JavaScript.</p>

<p><a href="https://www.linkedin.com/posts/gdg-silicon-valley_devfestsvl2023-techinnovation-communitypower-activity-7131192091279310848-at4x/">DevFest Silicon Valley 2023</a> was an absolute blaze of innovation and energy. From groundbreaking tech showcases to inspiring talks, every moment was a leap into the future. Huge shoutout to everyone who made it happen â€“ speakers, organizers, and attendees alike. Weâ€™ve truly set a new standard for tech conferences.</p>

<p>This talk is ideal for developers eager to bring machine learning to the frontend. Donâ€™t miss out on this opportunity to learn from Huanâ€™s experience and dive into hands-on ML with JavaScript.</p>

<h2 id="talk-video---tensorflowjs-machine-learning-in-javascript">Talk Video - TensorFlow.js: Machine Learning in Javascript</h2>

<div style="
    position: relative;
    padding-bottom: 56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="https://www.youtube.com/embed/BS26AtecnkM" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>

<p>The incredible talk by Huan Li, Chatbot Architect at Chatie, on â€œTensorFlow.js: Machine Learning in Javascriptâ€ from Devfest Silicon Valley.</p>

<blockquote>
  <p>Huan takes us on a journey into the world of machine learning right in your browser with TensorFlow.js. Whether youâ€™re a developer, tech enthusiast, or just curious about the intersection of JavaScript and ML, this talk is a must-watch!<br />
â€” <a href="https://www.linkedin.com/posts/gdg-silicon-valley_devfestslv2023-tensorflowjs-machinelearning-activity-7129505626128351232-wKm6">Google Developer Groups (GDG) Silicon Valley</a></p>
</blockquote>

<h2 id="atwoods-law">Atwoodâ€™s Law</h2>

<p><img src="/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/huan-photos.webp" alt="Huan Photos - DevFest Silicon Valley 2023" /></p>

<blockquote>
  <p>Any application that can be written in JavaScript, will eventually be written in JavaScript.<br />
â€” Jeff Atwood, StackOverflow Founder, <a href="https://blog.codinghorror.com/the-principle-of-least-power/">The Principle of Least Power</a>, Jul 2007</p>
</blockquote>

<p>Interested in more? Hereâ€™s a great blog post <a href="https://haacked.com/archive/2007/07/17/the-eponymous-laws-of-software-development.aspx/">19 Eponymous Laws Of Software Development</a> that you might enjoy!</p>

<h2 id="workshop-build-a-hello-world-program-in-the-browser-with-tensorflowjs">Workshop: Build a â€œHello Worldâ€ program in the browser with TensorFlow.js</h2>

<p><img src="/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/workshop-tensorflow-js-banner.webp" alt="Workshop: Build a &quot;Hello World&quot; program in the browser with TensorFlow.js - DevFest Silicon Valley 2023" /></p>

<p>TensorFlow.js is a JavaScript library that brings machine learning to the browser. It makes it easy to train and run machine learning models on web pages, without the need for any plugins or backend servers.</p>

<p>In this <a href="https://gdg.community.dev/events/details/google-gdg-silicon-valley-presents-workshop-build-a-hello-world-program-in-the-browser-with-tensorflowjs/">workshop</a>, you will learn how to use TensorFlow.js to build a simple â€œHello Worldâ€ program. You will learn about the basic concepts of TensorFlow.js, such as tensors, layers, and models. You will also learn how to train and run a model in the browser.</p>

<h2 id="about-devfest-silicon-valley-2023-ai-edition">About Devfest Silicon Valley 2023: AI Edition</h2>

<p><img src="/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/devfest-2023-sv-banner.webp" alt="Banner - DevFest Silicon Valley 2023" />
<img src="/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/agenda-devfest-gdg-sv-2023.webp" alt="Agenda - DevFest Silicon Valley 2023" /></p>

<ul>
  <li>When: Thursday, November 16, 2023, 9:00 AM â€“ 6:00 PM PST</li>
  <li>Where: Google Event Center (MP7), 1160 Bordeaux Drive, Sunnyvale, 94089</li>
</ul>

<h2 id="about-google-developer-group-gdg">About Google Developer Group (GDG)</h2>

<p><a href="https://goo.gle/GDG">Google Developer Groups (GDG)</a> are community-led initiatives for developers passionate about Google technologies and other modern tech. These local groups host a variety of events, from tech talks and workshops to hackathons, aimed at knowledge sharing, learning, and collaboration. Open to anyone interested in technology, GDGs provide a platform for networking, exploring new technologies, and engaging with the tech community through events like DevFests, which focus on Googleâ€™s developer technologies and more.</p>]]></content><author><name>huan</name></author><category term="talk" /><category term="tensorflow" /><category term="machine-learning" /><summary type="html"><![CDATA[Huan takes us on a journey into the world of machine learning right in your browser with TensorFlow.js. Whether youâ€™re a developer, tech enthusiast, or just curious about the intersection of JavaScript and ML, this talk is a must-watch! â€” GDG Silicon Valley]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/tensorflow-js-huan.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2024/02-devfest-silicon-valley-google-developer-group-tensorflow-js/tensorflow-js-huan.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">wechaty+LLM åŠ©åŠ›åŸºå±‚ç¤¾åŒºè‡ªæ²»</title><link href="https://wechaty.js.org/2023/11/21/digital-socialworker-assisstant/" rel="alternate" type="text/html" title="wechaty+LLM åŠ©åŠ›åŸºå±‚ç¤¾åŒºè‡ªæ²»" /><published>2023-11-21T00:00:00+00:00</published><updated>2023-11-21T00:00:00+00:00</updated><id>https://wechaty.js.org/2023/11/21/digital-socialworker-assisstant</id><content type="html" xml:base="https://wechaty.js.org/2023/11/21/digital-socialworker-assisstant/"><![CDATA[<p>å½“å±…å§”ä¼šé‡åˆ°wechaty+å¤§æ¨¡å‹â€¦â€¦</p>

<h2 id="ç¼˜èµ·">ç¼˜èµ·</h2>

<p>2022å¹´ä¸Šæµ·ç–«æƒ…å°æ§æœŸé—´ï¼Œ æˆ‘ä»¬å‡ ä¸ªå°ä¼™ä¼´æœ‰å¹¸ä»¥â€œITå¿—æ„¿è€…â€çš„èº«ä»½å¸®åŠ©åˆ°äº†ä¸¤ä¸ªå°åŒºçš„å¿—æ„¿è€…å›¢é˜Ÿï¼ˆæœ‰å…³è¿™æ®µç»å†ï¼š <a href="https://wechaty.js.org/2022/05/20/wechaty-ai-antigenbot/">åŒå¿ƒåŠ©åŠ›ï¼Œæˆ˜å½¹æœ‰AI!</a>ï¼‰ã€‚</p>

<p>æ²¡æƒ³åˆ°å°æ§è§£é™¤åï¼Œæˆ‘ä»¬çš„è¿™ä¸ªå·¥ä½œå¼•èµ·äº†æ”¿åºœéƒ¨é—¨çš„å…´è¶£ï¼Œäºæ˜¯å¼€å¯äº†æˆ‘ä»¬ä¸é™å®‰åŒºä¸´æ±¾è·¯è¡—é“é•¿è¾¾ä¸€å¹´çš„åˆä½œã€‚</p>

<h2 id="æ•°å­—ç¤¾å·¥åŠ©ç†">æ•°å­—ç¤¾å·¥åŠ©ç†</h2>

<p>é•¿æœŸä»¥æ¥ï¼Œä½œä¸ºç›´æ¥æœåŠ¡åŒ…æ‹¬ä½ æˆ‘åœ¨å†…çš„æ¯ä¸€åå±…æ°‘çš„æ‘/å±…å§”ä¼šéƒ½å…ä¸äº†è¢«è¯Ÿç—…â€œä¸ç»™åŠ›â€ï¼Œå°¤å…¶åœ¨ç–«æƒ…å°æ§è¿™ç§ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œå…¶ä¸è¶³ä¹‹å¤„æ›´æ˜¯æš´éœ²æ— é—ã€‚è€Œå®é™…ä¸Šè¿™èƒŒåæœ‰ç€å¤æ‚çš„åŸå› ï¼š</p>

<p>æ‘/å±…å§”ä¼šå¹¶ä¸å±äºæ”¿åºœæœºæ„ï¼Œè€Œæ˜¯â€œæ‘/å±…æ°‘è‡ªæ²»ç»„ç»‡â€ï¼Œä½†æ˜¯åœ¨æˆ‘å›½ç›®å‰çš„è¡Œæ”¿å¤§ç¯å¢ƒä¸‹ï¼Œå®ƒåˆä¸å¾—ä¸æ‰¿æ‹…èµ·æ”¿åºœçš„éƒ¨åˆ†èŒèƒ½ï¼Œæ¯”å¦‚ç¤¾åŒºç®¡ç†ã€åŸºå±‚æ²»ç†ç­‰ç­‰ã€‚è¿™ç§â€æ—¢ä¸æ˜¯æ”¿åºœï¼Œåˆä¸å¾—ä¸æ‰¿æ‹…æ”¿åºœèŒèƒ½â€çš„çŸ›ç›¾ï¼Œå¯¼è‡´äº†æ‘/å±…å§”ä¼šçš„å·¥ä½œæ•ˆç‡å’ŒæœåŠ¡è´¨é‡éƒ½ä¸å°½å¦‚äººæ„ã€‚</p>

<p>ä»¥ä¸Šæµ·ä¸ºä¾‹ï¼Œä¸€ä¸ªå±…å§”ä¼šé€šå¸¸ç”±5~9åç¤¾å·¥ç»„æˆï¼Œä½†éœ€è¦å¯¹æ¥3500~5000åå±…æ°‘ï¼Œå¹³å‡æ¯ä¸ªç¤¾å·¥å¯¹æ¥400~500äººâ€¦â€¦ä½†å…¶æ—¥å¸¸å·¥ä½œå´å¤šè¾¾119é¡¹ã€‚ï¼ˆä¸‹å›¾æ¥è‡ªå…¬ä¼—å·â€ä¸Šæµ·å¤§è°ƒç ”â€ï¼‰</p>

<p><img src="/assets/2023/11-digital-socialworker-assisstant/1.webp" alt="matrtial1" /></p>

<p>è¿™èƒŒåå…¶å®æ˜¯å¤æ‚çš„åŸºå±‚ç¤¾åŒºè‡ªæ²»é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘å›½æ”¿ä½“çš„å¤§èƒŒæ™¯ä¸‹ã€‚å­¦æœ¯ç•Œå¯¹æ­¤å…¶å®æœ‰å¾ˆå¤šè®ºè¿°å’Œç ”ç©¶ï¼Œä»ä¸­å¤®åˆ°åœ°æ–¹çš„å„çº§æ”¿åºœä¹Ÿä¸€ç›´åœ¨å‡ºå°å„ç§æ”¹é©æªæ–½ï¼Œä½†æœŸæœ›ä¸€è¹´è€Œå°±ä¹Ÿä¸ç°å®ï¼Œæ‘/å±…å§”ä¼šäººå°‘äº‹å¤šã€èƒ½åŠ›ä¸è¶³çš„æƒ…å†µå¹¶ä¸èƒ½é©¬ä¸Šå½»åº•è§£å†³ã€‚
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼•å…¥AIæŠ€æœ¯ï¼Œè¾…åŠ©ç¤¾å·¥çš„å·¥ä½œï¼Œå°±å¾ˆæœ‰æ„ä¹‰äº†ã€‚</p>

<h2 id="å¾®ä¿¡å¯¹è¯æœºå™¨äººçš„å…±è¯†">å¾®ä¿¡å¯¹è¯æœºå™¨äººçš„å…±è¯†</h2>

<p>æ•´ä¸ªç³»ç»Ÿä½¿ç”¨å¾®ä¿¡å¯¹è¯æœºå™¨äººï¼Œè€Œéä¼ ç»Ÿçš„ç½‘é¡µæˆ–è€…appï¼Œç”šè‡³ä¸ä½¿ç”¨å…¬ä¼—å·å’Œå°ç¨‹åºï¼Œè¿™ä¸€ç‚¹æ˜¯ä»åˆä½œåˆæœŸå°±ç¡®å®šçš„ï¼Œäº‹å®ä¸Šè¿™ä¹Ÿæ˜¯æœ€å¸å¼•ä¸´æ±¾è·¯è¡—é“çš„åœ°æ–¹ä¹‹ä¸€ï¼Œå› ä¸ºç¤¾å·¥å¤§éƒ¨åˆ†ä¸å…·æœ‰ç‰¹åˆ«é«˜çš„ITæŠ€èƒ½ï¼Œä¸”æ—¥å¸¸å·¥ä½œå·²ç»éå¸¸ç¹é‡ï¼Œæ ¹æœ¬æ²¡æœ‰æ—¶é—´å»å­¦ä¹ ã€é€‚åº”æ–°çš„å·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„äº§å“å¿…é¡»è¦èƒ½å¤Ÿâ€é›¶å­¦ä¹ æˆæœ¬â€ï¼›
å¦ä¸€æ–¹é¢ç°å®ä¸­åŸºå±‚çš„ç¤¾å·¥ï¼Œæ— è®ºæ˜¯ä¸å±…æ°‘çš„äº¤æµï¼Œè¿˜æ˜¯æ¥æ”¶ä¸Šçº§çš„æŒ‡ç¤ºã€é€šçŸ¥ç­‰ï¼Œè¿™äº›å·¥ä½œå…¶å®å°±æ˜¯é€šè¿‡å¾®ä¿¡å®Œæˆçš„ï¼ˆå¾ˆå¤šå„ä¸ªéƒ¨å§”æ–¥å·¨èµ„å¼€å‘çš„ç³»ç»Ÿï¼Œåœ¨å±…å§”ä¼šä¸­éƒ½æ˜¯â€œåƒç°â€çŠ¶æ€ï¼Œå› ä¸ºä½ ä¸èƒ½è¦æ±‚ç¤¾å·¥é¢å¯¹å±…æ°‘çš„é—®é¢˜ï¼Œç°å»æ‰¾ä¸€å°ç”µè„‘ï¼Œæ‰“å¼€ä¸€ä¸ªç•Œé¢ï¼Œç™»å½•åå†å»æ‰§è¡Œä¸€ç³»åˆ—ç¹ççš„æ“ä½œâ€¦â€¦ï¼‰ã€‚</p>

<p>è¿™ç§æƒ…å†µä¸‹ï¼Œå¾®ä¿¡å¯¹è¯æœºå™¨äººæ— ç–‘å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼š æœ€è‡ªç„¶çš„æ“ä½œç•Œé¢ï¼Œæ— éœ€ä¸‹è½½ä»»ä½•è½¯ä»¶ï¼Œæ·»åŠ å¥½å‹å°±èƒ½ä½¿ç”¨â€¦â€¦</p>

<p>åœ¨è¾¾æˆè¿™ä¸ªå…±è¯†åï¼Œèµ·åˆæˆ‘ä»¬æ˜¯æƒ³åŸºäºä¸ªäººå¾®ä¿¡åšå¼€å‘ï¼Œå› ä¸ºå¾ˆå¤šå·²ç»å­˜åœ¨çš„å·¥ä½œç¾¤ã€å±…æ°‘ç¾¤éƒ½æ˜¯ä¸ªäººå¾®ä¿¡ç¾¤ï¼Œå¦‚æœä½¿ç”¨ä¼ä¸šå¾®ä¿¡çš„è¯ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›è¿ç§»æˆæœ¬çš„ã€‚
ä½†å®è·µä¸‹æ¥å‘ç°ï¼Œä¸ªå¾®è¿˜æ˜¯æœ‰å¾ˆå¤šé™åˆ¶çš„ï¼Œæ¯”å¦‚ä¸æ­¢ä¸€æ¬¡ç¢°åˆ°äº†å› ä¸ºçŸ­æœŸå†…å‘é€20æ¡ä»¥ä¸Šç›¸åŒå†…å®¹çš„ä¿¡æ¯è€Œè§¦å‘24å°æ—¶ç¦è¨€â€¦â€¦
åŒæ—¶è€ƒè™‘æ­£è§„æ€§ç­‰å› ç´ ï¼Œæœ€ç»ˆå®¢æˆ·è¿˜æ˜¯è¢«æˆ‘ä»¬è¯´æœæ‰¿æ‹…ä¸€äº›è¿ç§»æˆæœ¬ï¼Œæ”¹ç”¨ä¼ä¸šå¾®ä¿¡ï¼Œå¹¶ä¸ºæ­¤æ–°è®¤è¯äº†ç»„ç»‡ï¼ˆä¸çŸ¥é“ä¼å¾®æ˜¯ä¸æ˜¯è€ƒè™‘ç»™æˆ‘ä»¬ç‚¹æ¨å¹¿è´¹ï¼‰ã€‚</p>

<p>åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå¥å­äº’åŠ¨ç»™äºˆäº†å¾ˆå¤§æ”¯æŒï¼ŒåˆæœŸçš„wxworkåè®®è¿˜æœ‰äº›ä¸å¤ªç¨³å®šï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ªæœˆè¦é‡å¯ä¸€æ¬¡ï¼Œå‡çº§ä¸ºworkproåï¼Œç»å†äº†å‡ ä¸ªæœˆçš„æ‰“ç£¨ï¼Œè‡ªä»Šå¹´5æœˆä»½ä»¥æ¥ï¼Œæ•´ä¸ªç³»ç»Ÿå°±éå¸¸ç¨³äº†ï¼Œè¿ç»­è¿è¡Œæ•°æœˆä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p>

<h2 id="198ä¸ªæ–‡æ¡£çš„ç—›è‹¦">198ä¸ªæ–‡æ¡£çš„ç—›è‹¦</h2>

<p>æˆ‘ä»¬åˆä½œçš„é™å®‰åŒºä¸´æ±¾è·¯è¡—é“ä¸‹è¾–20ä¸ªå±…å§”ä¼šï¼Œè¿‘200åç¤¾å·¥ã€‚ä¸Šæ–‡æåˆ°ï¼Œå…¶æ—¥å¸¸å·¥ä½œå¤šè¾¾119é¡¹ã€‚</p>

<p>æ¥è§¦åæˆ‘ä»¬å‘ç°ï¼Œå…¶å®è¿™äº›å¹´ä¸Šæµ·å¸‚æ”¿åºœä¸€ç›´åœ¨æ¨åŠ¨å±…å§”ä¼šè‡ªæ²»èƒ½åŠ›çš„æå‡ï¼Œä¸´æ±¾è·¯è¡—é“ç”šè‡³ä¸ºè¿™119é¡¹å·¥ä½œç¼–å†™äº†è¯¦ç»†çš„å·¥ä½œæ‰‹å†Œï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„SOPã€‚
ä»–ä»¬ä¸€å…±æœ‰198ä»½wordæ–‡æ¡£ï¼Œæ¸…æ™°è€Œè¯¦ç»†çš„è¡¨æ˜äº†æ¯ä¸€é¡¹å·¥ä½œçš„å½’å±å•ä½ã€åŠç†æ¡ä»¶ã€æ‰€éœ€ææ–™ä»¥åŠåŠäº‹æµç¨‹ç­‰ï¼Œäº‹å®ä¸Šï¼Œè¿™å·²ç»å®Œå…¨æ¶µç›–äº†å±…æ°‘æ—¥å¸¸ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ï¼Œä½†é—®é¢˜æ˜¯æ²¡æœ‰å“ªä¸ªç¤¾å·¥èƒ½å¤Ÿç†Ÿæ‚‰è®°å¿†è¿™198ä¸ªæ–‡æ¡£çš„è¯¦ç»†å†…å®¹ï¼Œé‡åˆ°é—®é¢˜æ‰‹åŠ¨æŸ¥æ‰¾åˆéå¸¸ç¹çè€—æ—¶ã€‚å¹¶ä¸”æ–‡æ¡£ä¸Šä½¿ç”¨çš„æ˜¯ä¹¦é¢ç”¨è¯ï¼Œè€Œå±…æ°‘æé—®å¾€å¾€æ˜¯å£è¯­ï¼Œ
ä¸¾ä¸ªä¾‹å­ï¼Œç»å¸¸æåˆ°çš„â€œç»é€‚æˆ¿â€ï¼Œæ ‡å‡†æ”¿åŠ¡ç”¨è¯­æ˜¯â€œå…±æœ‰äº§æƒä¿éšœä½æˆ¿â€ã€‚å¦å¤–ï¼Œå±…æ°‘æé—®æªè¾æ–¹å¼ä¹Ÿä¸ä¹¦é¢æ–‡æ¡£æœ‰å¾ˆå¤§ä¸åŒï¼Œæ¯”å¦‚ä¹¦é¢æ–‡æ¡£åªä¼šå†™â€œç¤¾ä¿å¡è¡¥åŠæµç¨‹â€ï¼Œä½†ç°å®ä¸­å±…æ°‘çš„æé—®æ›´å¯èƒ½æ˜¯ï¼šâ€œæˆ‘ç¤¾ä¿å¡æ‰äº†æ€ä¹ˆåŠï¼Ÿâ€ï¼ˆä¸Šæµ·è¯ä¸­â€æ‰äº†â€=â€ä¸¢äº†â€ï¼‰ã€‚
â€¦â€¦è¿™äº›éƒ½å®¢è§‚ä¸Šå¢åŠ äº†ç¤¾å·¥ä»¬ä½¿ç”¨SOPæ–‡æ¡£çš„éš¾åº¦ã€‚</p>

<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é‡‡é›†äº†å¹¶æ ‡æ³¨äº†400å¤šæ¡å±…æ°‘å®é™…æé—®ç”¨ä¾‹ï¼Œå¹¶ç»è¿‡æ•°æ®å¢å¼ºï¼Œåœ¨å¼€æºçš„rocketqaæ¨¡å‹åŸºç¡€ä¸Šä¸ºæœ¬é¡¹ç›®å¾®è°ƒäº†ä¸“å±çš„é—®ç­”åŒ¹é…æ¨¡å‹ï¼Œæœ€ç»ˆç»“åˆwechatyï¼Œå®ç°äº†æ•°å­—ç¤¾å·¥åŠ©ç†çš„ç¬¬ä¸€ä¸ªåŠŸèƒ½ï¼šæ™ºèƒ½SOPæ–‡æ¡£é—®ç­”ã€‚ä»æ­¤198ä¸ªæ–‡æ¡£çš„ç—›è‹¦å†ä¹Ÿä¸å­˜åœ¨äº†ã€‚</p>

<p><img src="/assets/2023/11-digital-socialworker-assisstant/3.webp" alt="matrtial2" /></p>

<p>ä¸Šçº¿åå®æµ‹æ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œç”šè‡³ç›´æ¥å¾®ä¿¡è¯­éŸ³æé—®ä¹Ÿèƒ½è·å¾—å¾ˆå‡†ç¡®çš„å›ç­”ã€‚</p>

<p><img src="/assets/2023/11-digital-socialworker-assisstant/2.webp" alt="matrtial3" /></p>

<h2 id="ä¸€å¥è¯ç”Ÿæˆçš„æ´»åŠ¨ç­–åˆ’æŠ¥å‘Š">ä¸€å¥è¯ç”Ÿæˆçš„æ´»åŠ¨ç­–åˆ’æŠ¥å‘Š</h2>

<p>åœ¨å®Œæˆäº†æ™ºèƒ½SOPé—®ç­”åï¼Œä¸´æ±¾è·¯è¡—é“åˆæå‡ºäº†ç¬¬äºŒä¸ªéœ€æ±‚â€”â€”ä¸€å¥è¯ç”Ÿæˆæ´»åŠ¨ç­–åˆ’æŠ¥å‘Šã€‚</p>

<p>åŸæ¥ï¼Œç›®å‰å±…å§”ä¼š50%çš„å·¥ä½œé‡æ˜¯ç»„ç»‡å„ç±»å±…æ°‘æ´»åŠ¨ï¼Œè¿™äº›æ´»åŠ¨æœ‰äº›æ˜¯ä¸ºäº†å®Œæˆç›¸åº”çš„å®£ä¼ å·¥ä½œï¼Œæ¯”å¦‚æ¯å¹´éƒ½æœ‰çš„å»ºå…šèŠ‚ã€å»ºå†›èŠ‚ã€æ¶ˆé˜²ç­ç«å®£ä¼ ï¼Œæ‰€åœ¨åŒºåŸŸçš„æ”¿ç­–å®£ä¼ ï¼Œå¦‚åƒåœ¾åˆ†ç±»ã€æ–‡æ˜åŸå¸‚åˆ›å»ºç­‰â€¦â€¦æœ‰ä¸€äº›åˆ™æ˜¯ç›¸å…³çš„æ–‡åŒ–æ´»åŠ¨ï¼Œæ¯”å¦‚ç«¯åˆèŠ‚ç»„ç»‡åŒ…ç²½å­ï¼Œå„¿ç«¥èŠ‚ç»„ç»‡å„¿ç«¥ç”»å±•ï¼Œä¸­ç§‹èŠ‚ç»„ç»‡èµæœˆâ€¦â€¦
æˆ‘ä»¬ä¹Ÿæ˜¯æ¥è§¦åæ‰äº†è§£ï¼Œè¿™äº›çœ‹ä¼¼æ²¡å•¥å®é™…æ„ä¹‰çš„æ–‡åŒ–æ´»åŠ¨å…¶å®å¾ˆæœ‰å¿…è¦ï¼Œç°ä»£ç”Ÿæ´»ï¼Œé‚»é‡Œä¹‹é—´çš„äº¤æµå¾ˆå°‘ï¼Œå¾ˆå¤šäººéƒ½ä¸çŸ¥é“è‡ªå·±çš„é‚»å±…æ˜¯è°ï¼Œè¿™äº›æ´»åŠ¨å°±æ˜¯ä¸ºäº†è®©å±…æ°‘ä»¬æœ‰æœºä¼šèšåœ¨ä¸€èµ·ï¼Œå¢è¿›é‚»é‡Œä¹‹é—´çš„æ„Ÿæƒ…ï¼Œå¾ˆå¤šå±…æ°‘é—´çš„çŸ›ç›¾åŸæ¥æ— æ³•è°ƒèŠ‚ï¼Œä½†æ˜¯ä¸€èµ·å‚åŠ ä¸€æ¬¡æ´»åŠ¨åå°±æœ‰äº†è°ƒèŠ‚ç©ºé—´ï¼Œè€Œå±…å§”ä¼šä¹Ÿéœ€è¦é€šè¿‡è¿™äº›æ´»åŠ¨æ‹‰è¿‘ä¸å±…æ°‘çš„è·ç¦»ï¼Œè¿™æ ·æœªæ¥éœ€è¦ä»–ä»¬å‡ºé¢åšå„ç§è¯´æœå·¥ä½œä¹Ÿæ‰æœ‰æ„Ÿæƒ…åŸºç¡€ã€‚</p>

<p>ä½†æ˜¯å±…å§”ä¼šæ¯æ¬¡ç»„ç»‡æ´»åŠ¨éƒ½éœ€è¦å†™ä¸€ä»½ç­–åˆ’æ¡ˆç”³è¯·ï¼Œè¿™ä¸ªå·¥ä½œå¯¹äºå¾ˆå¤šç¤¾å·¥æ¥è¯´ï¼Œå±äºâ€œä¸å¾—ä¸å®Œæˆâ€çš„äº‹æƒ…ï¼Œå¦å¤–æ—¶é—´é•¿äº†ï¼Œç¤¾å·¥ä»¬ä¹Ÿé¢ä¸´ç€â€œæ´»åŠ¨åˆ›æ„ç©·å°½â€çš„é—®é¢˜â€¦â€¦</p>

<p>æ¥åˆ°è¿™ä¸ªéœ€æ±‚åï¼Œæˆ‘ä»¬é©¬ä¸Šæƒ³åˆ°äº†å¤§æ¨¡å‹ã€‚è¿™ç¡®å®æ˜¯ä¸€ä¸ªå¯ä»¥çœŸå®å‘æŒ¥å¤§æ¨¡å‹ä»·å€¼çš„åœºæ™¯ã€‚é€‚é€¢åœ¨4ã€5æœˆä»½ï¼Œè¡Œä¸šè¿æ¥äº†LLMçš„å¤§çˆ†å‘ï¼Œæˆ‘ä»¬çš„é€‰æ‹©å¾ˆå¤šã€‚æˆ‘ä»¬é¦–å…ˆæ ¹æ®éœ€æ±‚ï¼Œç»“åˆæŠ¥å‘Šçš„æ¨¡æ¿è¦æ±‚ï¼Œè®¾è®¡äº†promptï¼Œç„¶åæ¯”è¾ƒäº†å¤šä¸ªå¼€æºæ¨¡å‹å’Œå•†ç”¨å¤§æ¨¡å‹APIçš„æ•ˆæœï¼Œæœ€åç»¼åˆç”Ÿæˆè´¨é‡ã€é€Ÿåº¦ä»¥åŠæˆæœ¬ï¼Œå¹¶å……åˆ†è€ƒè™‘äº†æ”¿åŠ¡ç³»ç»Ÿæ•°æ®å®‰å…¨æ€§çš„ç‰¹æ®Šè¦æ±‚ï¼Œ é€‰æ‹©äº†æœ¬åœ°éƒ¨ç½²ChatGLM2-6Bä½œä¸ºæœ€ç»ˆçš„æ–¹æ¡ˆã€‚</p>

<p><img src="/assets/2023/11-digital-socialworker-assisstant/4.webp" alt="matrtial4" /></p>

<p><strong>æœ€åï¼Œæ”¾ä¸€ä¸‹äº§å“è§†é¢‘å§ï¼š</strong></p>

<div style="
    position: relative;
    padding-bottom: 70%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="https://player.bilibili.com/player.html?bvid=BV1x94y1H7yE/?vd_source=a9a9b3058af6573c5ad2ff31c387fa44&amp;high_quality=1" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>

<h2 id="é¡¹ç›®æ”¶åˆ°ä¸»æµåª’ä½“çš„å¹¿æ³›æŠ¥é“">é¡¹ç›®æ”¶åˆ°ä¸»æµåª’ä½“çš„å¹¿æ³›æŠ¥é“</h2>

<p>â€œæ•°å­—ç¤¾å·¥åŠ©ç†â€ä¸Šçº¿åï¼Œä¸ä»…å¾—åˆ°äº†ç¤¾å·¥ä»¬çš„å¹¿æ³›å¥½è¯„ï¼Œä¹Ÿå¸å¼•äº†å¤šå®¶ä¸“ä¸šåª’ä½“çš„æŠ¥é“ï¼Œè¿™å¯¹å›¢é˜Ÿæ¥è¯´ä¹Ÿæ˜¯ä¸€ç§é¼“åŠ±ã€‚</p>

<p><img src="/assets/2023/11-digital-socialworker-assisstant/5.webp" alt="matrtial5" /></p>

<h2 id="å†™åœ¨æœ€åçš„è¯">å†™åœ¨æœ€åçš„è¯</h2>

<p>é€šè¿‡ä¸€å¹´å¤šè¿‘è·ç¦»ä¸ä¸´æ±¾è·¯è¡—é“çš„æ¥è§¦ï¼Œæˆ‘ä»¬çœŸå®æ„Ÿå—åˆ°äº†ä»€ä¹ˆå«â€ä¸Šå¤´åƒæ ¹çº¿ï¼Œä¸‹é¢ä¸€æ ¹é’ˆâ€ï¼ŒåŸºå±‚å·¥ä½œç¡®å®ä¸å¥½åšï¼Œæˆ‘ä»¬å¾ˆå¼€å¿ƒèƒ½å¤Ÿä¸ºæ­¤äº›è®¸åŠ©åŠ›ã€‚</p>

<p>ä¸è¿‡ä¹Ÿå¿…é¡»æ‰¿è®¤æ­¤é¡¹ç›®æœ‰ä¸€å®šçš„å¶ç„¶æ€§ï¼Œé¦–å…ˆé¡¹ç›®æ‰€åœ¨åœ°ä¸Šæµ·æœ¬èº«å°±æ˜¯ä¸­å›½ç›®å‰æ”¿åŠ¡ç†å¿µæœ€å¼€æ˜çš„åœ°åŒºï¼Œç„¶åä¸´æ±¾è·¯è¡—é“åˆæ˜¯å…¨å›½æ”¿åŠ¡ä¿¡æ¯åŒ–çš„ç¤ºèŒƒå•ä½ï¼Œä¸æˆ‘ä»¬å¯¹æ¥çš„è´Ÿè´£äººå¤§å­¦ä¸“ä¸šå°±æ˜¯è®¡ç®—æœºï¼Œå¯¹æ–°æŠ€æœ¯æœ‰ä¸€å®šçš„æ•æ„Ÿåº¦ï¼Œè¿™äº›éƒ½æ˜¯éš¾ä»¥å¤åˆ¶çš„å› ç´ ã€‚</p>

<p>æˆ‘ä»¬ä¹Ÿåœ¨2023å¹´å¤å­£å°è¯•å°†æ­¤é¡¹ç›®è¿›è¡Œæ¨å¹¿ï¼Œä½†å¹¶ä¸æˆåŠŸï¼Œè¿™é‡Œé¢ä¸å­˜åœ¨æŠ€æœ¯é—®é¢˜ï¼Œç”šè‡³ä¹Ÿä¸å­˜åœ¨å•†åŠ¡é—®é¢˜ï¼ˆå¤§éƒ¨åˆ†æœ‰æ„å‘ä½¿ç”¨è¯¥ç³»ç»Ÿçš„è¡—é•‡éƒ½æ˜¯æœ‰èƒ½åŠ›æ‰¿æ‹…æ¯å¹´åå‡ ä¸‡çš„è´¹ç”¨çš„ï¼‰ï¼Œæ›´å¤šçš„é˜»åŠ›æ¥è‡ªæ”¿åŠ¡é¢†åŸŸçš„ç‰¹æ®Šæ€§ã€‚å½“ç„¶ï¼Œå¦ä¸€ä¸ªå¾ˆå¤§çš„å› ç´ æ˜¯ï¼Œå›¢é˜Ÿè‡³ä»Šéƒ½åªæ˜¯å…¼èŒï¼Œåœ¨å¸‚åœºå’Œæ¨å¹¿ä¸Šå…¶å®ä¹Ÿæ²¡æœ‰æŠ•å…¥è¶³å¤Ÿçš„ç²¾åŠ›ã€‚</p>

<p>ä½†æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬è¿˜æ˜¯è®¤ä¸ºè¿™ä¸ªå·¥ä½œæ˜¯æœ‰ä»·å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿåœ¨è®¨è®ºå°†è¿™ä¸ªäº§å“è¿›è¡Œå¼€æºï¼ŒåŒæ—¶æœåŠ¡æ›´å¤šçš„è‡ªæ²»æ€§ç»„ç»‡ï¼Œæˆ‘ä»¬ç›¸ä¿¡ï¼šå€Ÿç§‘æŠ€ä¹‹åŠ›ï¼Œæ˜¯å¯ä»¥æœ€å¤§åŒ–é™ä½ç»„ç»‡çš„ç®¡ç†å·¥ä½œé‡çš„ï¼Œè€Œç®¡ç†äººå‘˜å æ¯”çš„é™ä½æ˜¯è‡ªæ²»çš„å¿…è¦æ¡ä»¶ä¹‹ä¸€ï¼</p>]]></content><author><name>bigbrother666sh</name></author><category term="article" /><category term="workpro" /><category term="llm" /><category term="agent" /><summary type="html"><![CDATA[å½“å±…å§”ä¼šé‡åˆ°wechaty+å¤§æ¨¡å‹â€¦â€¦]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2023/11-digital-socialworker-assisstant/0.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2023/11-digital-socialworker-assisstant/0.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Game-Copilotè¾…åŠ©æ¸¸æˆå·¥ä½œå®¤è¿›è¡Œå¤´è„‘é£æš´</title><link href="https://wechaty.js.org/2023/10/24/game-designer-group-on-wechat/" rel="alternate" type="text/html" title="Game-Copilotè¾…åŠ©æ¸¸æˆå·¥ä½œå®¤è¿›è¡Œå¤´è„‘é£æš´" /><published>2023-10-24T00:00:00+00:00</published><updated>2023-10-24T00:00:00+00:00</updated><id>https://wechaty.js.org/2023/10/24/game-designer-group-on-wechat</id><content type="html" xml:base="https://wechaty.js.org/2023/10/24/game-designer-group-on-wechat/"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2>

<p>åœ¨ç°ä»£æ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆ›æ–°å’Œåˆ›æ„çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ç„¶è€Œï¼Œå³ä½¿å¯¹äºæœ€æœ‰æ‰åçš„å¼€å‘è€…æ¥è¯´ï¼Œçµæ„Ÿä¹Ÿå¯èƒ½ä¼šæ¯ç«­ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŸºäºGPT-4çš„è¾…åŠ©å·¥å…·ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºGame Copilotã€‚è¿™ä¸ªå·¥å…·æ˜¯ä¸€ä¸ªåŒ…å«åä¸€ä¸ªagentçš„èŠå¤©å®¤ï¼Œæ—¨åœ¨å¸®åŠ©æ¸¸æˆåˆ›ä¸šè€…è¿›è¡Œå¤´è„‘é£æš´å’Œä¼˜åŒ–æ¸¸æˆã€‚</p>

<h2 id="å·¥ä½œæœºåˆ¶">å·¥ä½œæœºåˆ¶</h2>

<p>Game Copilotæ˜¯æ€ä¹ˆå·¥ä½œçš„å‘¢ï¼Ÿå®ƒåˆ©ç”¨GPT-4çš„å¼ºå¤§åŠŸèƒ½ï¼Œæä¾›ä¸–ç•Œè§‚ï¼Œæœºåˆ¶ï¼Œç©æ³•ï¼Œè§’è‰²ç­‰æ¸¸æˆå¿…è¦çš„å…ƒç´ ï¼Œä¸ºå¼€å‘è€…æä¾›çµæ„Ÿã€‚å®ƒèƒ½å¤Ÿè¡¨ç°å‡ºé«˜å‘æ•£æ€§ï¼Œå¹¶èƒ½å¯¹è¿‡å»çš„æ¸¸æˆï¼Œå°è¯´ï¼Œå½“å‰ä¸–ç•ŒèƒŒæ™¯è¿›è¡Œå‚è€ƒï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºç‹¬ç‰¹ä¸”å¼•äººå…¥èƒœçš„æ¸¸æˆä½“éªŒã€‚</p>

<h2 id="é¡¹ç›®ä¿¡æ¯">é¡¹ç›®ä¿¡æ¯</h2>

<p>Game Copilotä¸»è¦é€‚ç”¨äºç‹¬ç«‹å·¥ä½œå®¤å’ŒRPGç±»æ¸¸æˆçš„å¼€å‘ã€‚ä¸è®ºä½ æ˜¯ä¸€ä½æ¸¸æˆåˆ›ä¸šè€…ï¼Œè¿˜æ˜¯ä¸€ä½å¯»æ±‚æ–°çµæ„Ÿçš„å¼€å‘è€…ï¼ŒGame Copilotéƒ½èƒ½ä¸ºä½ æä¾›å¸®åŠ©ã€‚</p>

<p>ä¸ºäº†æé«˜æ˜“ç”¨æ€§ï¼Œæˆ‘ä»¬é€šè¿‡wechatyæ¥å…¥äº†ä¼ä¸šå¾®ä¿¡ï¼Œä½¿å¾—ç”¨æˆ·èƒ½åœ¨ä»»ä½•åœ°æ–¹ï¼Œä»»ä½•æ—¶å€™è®°å½•è‡ªå·±çš„çµæ„Ÿï¼Œå¹¶è¿›è¡Œè¿­ä»£ã€‚æ— è®ºæ˜¯åœ¨æŒ¤å…¬äº¤è½¦ï¼Œè¿˜æ˜¯åœ¨ä¼‘é—²çš„å’–å•¡é¦†ï¼Œåªéœ€æ‰“å¼€ä¼ä¸šå¾®ä¿¡ï¼Œå°±èƒ½è½»æ¾è®¿é—®Game Copilotã€‚</p>

<p>ç½‘é¡µç‰ˆï¼š
<a href="https://game-copilot-frontend.zeabur.app">ä½“éªŒé“¾æ¥</a>
ä¼å¾®Botç‰ˆï¼šå¼€å‘ä¸­ã€‚</p>

<h2 id="åç«¯æ¶æ„">åç«¯æ¶æ„</h2>

<h3 id="technology">Technology</h3>

<ol>
  <li>Package Manager: Poetry</li>
  <li>Backend Framework: FastAPI</li>
  <li>Database: MongoDB and Beanie</li>
</ol>

<h3 id="get-started">Get Started</h3>

<ol>
  <li>Install Poetry and <code class="language-plaintext highlighter-rouge">poetry install</code></li>
  <li>Prepare MongoDB. The easiest way is using docker: <code class="language-plaintext highlighter-rouge">docker run --rm -p 27017:27017 mongo</code></li>
  <li>Install <code class="language-plaintext highlighter-rouge">game-copilot-agent-v2</code> and generate access key</li>
  <li>Uncomment <code class="language-plaintext highlighter-rouge">.env</code> file and fill in the required information</li>
  <li>Run <code class="language-plaintext highlighter-rouge">uvicorn src.main:app --reload</code></li>
</ol>

<h3 id="game-design-workflow">Game Design Workflow</h3>

<ol>
  <li>Register and Login</li>
  <li>Start a Game: Sense we are using paid API for generating, each user will have limit on the number of games they can
design.</li>
  <li>Primary Information Collector: User will chat with a information collector agent. Then generate a basic description
of the game user want to design.</li>
  <li>Design Iteration:
    <ol>
      <li>Firstly, user will chat with a group of agents, including an ideation agent and a critic agents. They will help
user to brainstorm fancy ideas and give feedbacks on those ideas and current game design.</li>
      <li>When user is satisfied with new ideas and comments, they can issue a full game design iteration.</li>
      <li>After a full design are generated, user can review and modify the design.
        <ol>
          <li>More specifically, user can issue a â€œcommandâ€, such as â€œadd some new ideas in hereâ€ or â€œgive me more options
for this partâ€.</li>
          <li>Agents will generate the requested result.</li>
          <li>User and Agents chat with each other to discuss the result.</li>
          <li>Finally, user can choose to accept or reject the modification.</li>
        </ol>
      </li>
      <li>This â€œDesign Iterationâ€ can be repeated for several times until user is satisfied with our result.</li>
    </ol>
  </li>
</ol>

<p><img src="/assets/2023/10-game-designer-group-on-wechat/2.webp" alt="agent workflow" /></p>

<h3 id="data-model">Data Model</h3>

<ol>
  <li>User: Very basic and common design
    <ol>
      <li>email, username, (hashed)password, email validation, type</li>
      <li>In addition, a game limit counter is used</li>
    </ol>
  </li>
  <li>Game:
    <ol>
      <li>user id, create time, design stage</li>
      <li>title: string</li>
    </ol>
  </li>
  <li>Revision: Store all chat messages, commands and designs.
    <ol>
      <li>game id, create time, is closed</li>
      <li>type: collect-info, co-design, review-design</li>
      <li>iteration: int</li>
    </ol>
  </li>
  <li>Record:
    <ol>
      <li>revision id, create time</li>
      <li>is agent, agent name</li>
      <li>type: chat, command, design</li>
      <li>command type: add, more-options</li>
      <li>content: string</li>
    </ol>
  </li>
  <li>Relations: User has-many Games, Game has-many Revisions, GameRevision has-many Records</li>
  <li>Structure
    <ol>
      <li>Game: collect-info - co-design - review-design - co-design - review-design - â€¦</li>
      <li>Every â€œRevisionâ€ starts with a â€œBootstrapâ€ operation and ends with a â€œFinalizeâ€ operation.</li>
      <li>Revision(collect-info): bootstrap - chat - chat - â€¦ - chat - design</li>
      <li>Revision(co-design): bootstrap - chat - chat - â€¦ - chat - todo-list - confirm - design</li>
      <li>Revision(review-design): bootstrap - chat - chat - â€¦ - chat - design</li>
    </ol>
  </li>
</ol>

<h3 id="required-agent-api">Required â€œAgentâ€ API</h3>

<ol>
  <li>Common Description
    <ol>
      <li><strong>All</strong> API should be invoked with an â€œagent-tokenâ€ in request body. <code class="language-plaintext highlighter-rouge">{ "token": "&lt;token&gt;"}</code></li>
      <li><strong>All</strong> API except <code class="language-plaintext highlighter-rouge">bootstrap</code> message should be invoked with an â€œsession-idâ€ (may be generated
by <code class="language-plaintext highlighter-rouge">uuid.uuid4().hex</code>) in request body. <code class="language-plaintext highlighter-rouge">{ "session_id": "&lt;uuid&gt;" }</code></li>
      <li>Reset message (Force terminate session): <code class="language-plaintext highlighter-rouge">{ "type": "reset" }</code></li>
      <li>Error message: <code class="language-plaintext highlighter-rouge">{ "type": "error", "detailed": "&lt;str&gt;" }</code>, For example:
        <ol>
          <li>Invalid session id</li>
          <li>Invalid message scheme/format</li>
          <li>Unexpected message type</li>
        </ol>
      </li>
    </ol>
  </li>
  <li><code class="language-plaintext highlighter-rouge">/api/collect-info/</code>
    <ol>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "bootstrap" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "session", "session_id": "&lt;uuid&gt;" }</code></li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "chat-user", "content": "&lt;msg&gt;" }</code></li>
      <li>S -&gt; C:
        <ol>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent-name", "name": "&lt;name&gt;" }</code></li>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent", "content": "&lt;msg&gt;" }</code></li>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent-fin", "end": "&lt;bool&gt;" }</code></li>
        </ol>
      </li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "end" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "design", "content": "&lt;design&gt;" }</code></li>
    </ol>
  </li>
  <li><code class="language-plaintext highlighter-rouge">/api/co-design/</code>
    <ol>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "bootstrap", "design": "&lt;design&gt;" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "session", "session_id": "&lt;uuid&gt;" }</code></li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "chat-user", "content": "&lt;msg&gt;" }</code></li>
      <li>S -&gt; C:
        <ol>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent-name", "name": "&lt;name&gt;" }</code></li>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent", "content": "&lt;msg&gt;" }</code></li>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent-fin" }</code></li>
        </ol>
      </li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "end" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "summary", "content": "&lt;content&gt;" }</code></li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "confirm", "content": "&lt;content&gt;" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "design", "content": "&lt;design&gt;" }</code></li>
    </ol>
  </li>
  <li><code class="language-plaintext highlighter-rouge">/api/review-design/</code>
    <ol>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "bootstrap" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "session", "session_id": "&lt;uuid&gt;" }</code></li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "add|more-options", "design": "&lt;design&gt;", "target": "&lt;target&gt;", "extra": "&lt;extra&gt;" }</code></li>
      <li>S -&gt; C: <code class="language-plaintext highlighter-rouge">{ "type": "result", "content": "&lt;content&gt;" }</code></li>
      <li>C -&gt; S: <code class="language-plaintext highlighter-rouge">{ "type": "chat-user", "content": "&lt;msg&gt;" }</code></li>
      <li>S -&gt; C:
        <ol>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent-name", "name": "&lt;name&gt;" }</code></li>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent", "content": "&lt;msg&gt;" }</code></li>
          <li><code class="language-plaintext highlighter-rouge">{ "type": "chat-agent-fin" }</code></li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<h3 id="frontend-api">Frontend API</h3>

<ol>
  <li><code class="language-plaintext highlighter-rouge">/login/</code> <code class="language-plaintext highlighter-rouge">/signup/</code></li>
  <li>RESTful API
    <ol>
      <li><code class="language-plaintext highlighter-rouge">/users/</code> <code class="language-plaintext highlighter-rouge">/users/{uid}</code></li>
      <li><code class="language-plaintext highlighter-rouge">/users/{uid}/games/</code>  <code class="language-plaintext highlighter-rouge">/users/{uid}/games/{gid}</code></li>
      <li><code class="language-plaintext highlighter-rouge">/users/{uid}/games/{gid}/revision</code> <code class="language-plaintext highlighter-rouge">/users/{uid}/games/{gid}/revision/{rid}</code></li>
      <li><code class="language-plaintext highlighter-rouge">/users/{uid}/games/{gid}/revision/{rid}/records</code></li>
    </ol>
  </li>
  <li>Server-Side Events (Prefix: <code class="language-plaintext highlighter-rouge">/users/{uid}/games/{gid}/revision/{rid}/records</code>)
    <ol>
      <li><code class="language-plaintext highlighter-rouge">/chat</code> <code class="language-plaintext highlighter-rouge">/reset</code></li>
      <li><code class="language-plaintext highlighter-rouge">/collect/end</code></li>
      <li><code class="language-plaintext highlighter-rouge">/codesign/end</code> <code class="language-plaintext highlighter-rouge">/codesign/confirm</code></li>
      <li><code class="language-plaintext highlighter-rouge">/review/command</code> <code class="language-plaintext highlighter-rouge">/review/submit</code></li>
    </ol>
  </li>
  <li>Process:
    <ol>
      <li>Create game: <code class="language-plaintext highlighter-rouge">POST /users/{uid}/games</code></li>
      <li>Create revision (with types): <code class="language-plaintext highlighter-rouge">POST /users/{uid}/games/{gid}</code></li>
      <li>Collect-Info
        <ol>
          <li>Chat: <code class="language-plaintext highlighter-rouge">POST .../chat</code></li>
          <li>End: <code class="language-plaintext highlighter-rouge">POST .../end-collection</code></li>
        </ol>
      </li>
      <li>Co-Design
        <ol>
          <li>Chat: <code class="language-plaintext highlighter-rouge">POST .../chat</code></li>
          <li>End: <code class="language-plaintext highlighter-rouge">POST .../end-co-design</code></li>
          <li>Confirm: <code class="language-plaintext highlighter-rouge">POST .../confirm-summary</code></li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<h3 id="backend-todo">Backend TODO</h3>

<ul>
  <li>Legends:
    <ul>
      <li>:white_circle: Not started</li>
      <li>:construction: In progress</li>
      <li>:eight_pointed_black_star: Backend code finished. Need to be tested and integrated with frontend or agents.</li>
      <li>:white_check_mark: Done!</li>
      <li>:thought_balloon: Need to be discussed / Blocked by other tasks</li>
    </ul>
  </li>
  <li>Authentication:
    <ul>
      <li>:white_check_mark: Signup</li>
      <li>:white_check_mark: Login</li>
      <li>:white_circle: Email verification</li>
      <li>:white_circle: Password reset</li>
    </ul>
  </li>
  <li>User:
    <ul>
      <li>:white_check_mark: Get info</li>
      <li>:white_circle: Update info</li>
      <li>:white_circle: Delete account</li>
      <li>:white_circle: Get user list</li>
    </ul>
  </li>
  <li>Game:
    <ul>
      <li>:white_check_mark: Get userâ€™s game list</li>
      <li>:white_check_mark: Create game</li>
      <li>:white_check_mark: Get game info</li>
    </ul>
  </li>
  <li>Revision:
    <ul>
      <li>:white_check_mark: Get gameâ€™s revision list</li>
      <li>:construction: Create revision</li>
      <li>:white_check_mark: Get revision info</li>
    </ul>
  </li>
  <li>Record:
    <ul>
      <li>:eight_pointed_black_star: Get revisionâ€™s record list</li>
      <li>:eight_pointed_black_star: User chat</li>
      <li>:eight_pointed_black_star: Collect info end</li>
      <li>:eight_pointed_black_star: Co-design end</li>
      <li>:eight_pointed_black_star: Co-design confirm</li>
      <li>:eight_pointed_black_star: Review design command</li>
      <li>:eight_pointed_black_star: Review design submit</li>
    </ul>
  </li>
  <li>Agent Interaction:
    <ul>
      <li>:eight_pointed_black_star: Collect info</li>
      <li>:eight_pointed_black_star: Co-design</li>
      <li>:eight_pointed_black_star: Review design</li>
      <li>:thought_balloon: Session recovery</li>
    </ul>
  </li>
  <li>Others
    <ul>
      <li>:white_circle: Deploy to Zeabur</li>
    </ul>
  </li>
</ul>]]></content><author><name>karrykeksis</name></author><category term="article" /><category term="blog" /><category term="game" /><category term="agent" /><summary type="html"><![CDATA[ä»‹ç»]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2023/10-game-designer-group-on-wechat/1.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2023/10-game-designer-group-on-wechat/1.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">wechaty+TypeChat:ä½¿ç”¨è‡ªç„¶è¯­è¨€æ§åˆ¶ä½ çš„å¾®ä¿¡</title><link href="https://wechaty.js.org/2023/08/06/use-llm-control-your-wechat/" rel="alternate" type="text/html" title="wechaty+TypeChat:ä½¿ç”¨è‡ªç„¶è¯­è¨€æ§åˆ¶ä½ çš„å¾®ä¿¡" /><published>2023-08-06T00:00:00+00:00</published><updated>2023-08-06T00:00:00+00:00</updated><id>https://wechaty.js.org/2023/08/06/use-llm-control-your-wechat</id><content type="html" xml:base="https://wechaty.js.org/2023/08/06/use-llm-control-your-wechat/"><![CDATA[<p>éšç€ChatGPTç«çˆ†ï¼ŒLLMåº”ç”¨å¦‚é›¨åæ˜¥ç¬‹ï¼Œå±‚å‡ºä¸ç©·ã€‚å‡ ä¹ä»»ä½•äººéƒ½å¯ä»¥åŸºäºå¤§é¢„è¨€æ¨¡å‹å¼€å‘å‡ºè‡ªå·±çš„å¤©çŒ«ç²¾çµã€å°çˆ±åŒå­¦ã€å°åº¦å°åº¦â€¦</p>

<p>ä»Šå¤©æˆ‘å°†å‘å¤§å®¶ä»‹ç»ä¸€ä¸ªåŸºäºChatGPTå¼€å‘çš„ä½¿ç”¨è‡ªç„¶è¯­è¨€æ§åˆ¶å¾®ä¿¡æ–¹æ¡ˆã€‚ä½¿ç”¨LLMæ§åˆ¶wechatyæœºå™¨äººæ‰§è¡Œå„ç§å‘½ä»¤ï¼Œwechaty+ <a href="https://github.com/microsoft/TypeChat">TypeChat</a> çš„ç»“åˆï¼Œå·²å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼ˆå®Œæ•´ä»£ç æŸ¥çœ‹<a href="https://github.com/atorber/type-wechaty">type-wechaty https://github.com/atorber/type-wechaty</a>ä½“éªŒï¼‰ï¼š</p>

<ul>
  <li>
    <p>ä½¿ç”¨è‡ªç„¶è¯­è¨€ç»™æŒ‡å®šå¥½å‹æˆ–ç¾¤å‘æ¶ˆæ¯ï¼ˆå¦‚æœä½ æ˜¯ä¸€ä¸ªæ—¥å¸¸éœ€è¦åè°ƒå’Œå®‰æ’å„ç§ä¸åŒçš„äººæˆ–ç¾¤çš„è§’è‰²ï¼Œè¿™å°†éå¸¸æœ‰å¸®åŠ©ï¼‰</p>
  </li>
  <li>
    <p>æ›´å¤šâ€¦å—¯ï¼Œè¿˜æ²¡æœ‰å®ç°</p>
  </li>
</ul>

<p>å¾—ç›Šäºå¾®è½¯çš„TypeChat <a href="https://github.com/microsoft/TypeChat">https://github.com/microsoft/TypeChat</a>ï¼Œæ–¹æ¡ˆä¸­æˆ‘ä»¬ä»…ä»…é€šè¿‡å®šä¹‰ç±»å‹å³å¿«é€Ÿå®ç°äº†ä¸Šè¿°åŠŸèƒ½ï¼Œè€Œæ‹“å±•åŠŸèƒ½ä»…ä»…éœ€è¦ç»§ç»­æ‹“å±•æ›´å¤šçš„typeã€‚</p>

<p>é¦–å…ˆï¼Œä»‹ç»ä¸€ä¸‹TypeChat <a href="https://github.com/microsoft/TypeChat">https://github.com/microsoft/TypeChat</a></p>

<h2 id="typechat">TypeChat</h2>

<p>å®˜æ–¹ä»‹ç»ï¼š</p>

<pre><code class="language-TypeScript">TypeChat is a library that makes it easy to build natural language interfaces using types.

Building natural language interfaces has traditionally been difficult. These apps often relied on complex decision trees to determine intent and collect the required inputs to take action. Large language models (LLMs) have made this easier by enabling us to take natural language input from a user and match to intent. This has introduced its own challenges including the need to constrain the model's reply for safety, structure responses from the model for further processing, and ensuring that the reply from the model is valid. Prompt engineering aims to solve these problems, but comes with a steep learning curve and increased fragility as the prompt increases in size.

TypeChat replaces prompt engineering with schema engineering.

Simply define types that represent the intents supported in your natural language application. That could be as simple as an interface for categorizing sentiment or more complex examples like types for a shopping cart or music application. For example, to add additional intents to a schema, a developer can add additional types into a discriminated union. To make schemas hierarchical, a developer can use a "meta-schema" to choose one or more sub-schemas based on user input.

After defining your types, TypeChat takes care of the rest by:

Constructing a prompt to the LLM using types.
Validating the LLM response conforms to the schema. If the validation fails, repair the non-conforming output through further language model interaction.
Summarizing succinctly (without use of a LLM) the instance and confirm that it aligns with user intent.
Types are all you need!
</code></pre>

<p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š</p>

<ol>
  <li>TypeChatæ˜¯ä¸€ä¸ªåº“ï¼Œå¯ä»¥è½»æ¾ä½¿ç”¨ç±»å‹æ„å»ºè‡ªç„¶è¯­è¨€ç•Œé¢ã€‚</li>
  <li>TypeChatç”¨æ¨¡å¼å·¥ç¨‹å–ä»£äº†æç¤ºå·¥ç¨‹ã€‚</li>
  <li>å®šä¹‰ç±»å‹åï¼ŒTypeChatå°†é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†å…¶ä½™éƒ¨åˆ†ï¼šä½¿ç”¨ç±»å‹æ„å»º LLM æç¤ºã€‚éªŒè¯ LLM å“åº”æ˜¯å¦ç¬¦åˆæ¶æ„ã€‚å¦‚æœéªŒè¯å¤±è´¥ï¼Œåˆ™é€šè¿‡è¿›ä¸€æ­¥çš„è¯­è¨€æ¨¡å‹äº¤äº’ä¿®å¤ä¸åˆæ ¼çš„è¾“å‡ºã€‚ç®€æ´åœ°æ€»ç»“ï¼ˆä¸ä½¿ç”¨æ³•å­¦ç¡•å£«ï¼‰å®ä¾‹å¹¶ç¡®è®¤å…¶ä¸ç”¨æˆ·æ„å›¾ä¸€è‡´ã€‚ç±»å‹å°±æ˜¯æ‚¨æ‰€éœ€è¦çš„ï¼</li>
</ol>

<p>å¯¹äºä½¿ç”¨çš„TypeScriptå¼€å‘è€…æ¥è¯´è¿™ä¸ªé¡¹ç›®ç®€ç›´æ˜¯å¤ªé…·äº†ã€‚</p>

<h2 id="éœ€æ±‚æè¿°">éœ€æ±‚æè¿°</h2>

<p>æˆ‘ä»¬çš„éœ€æ±‚æ˜¯é€šè¿‡ä¸å¾®ä¿¡æœºå™¨äººå¯¹è¯æ¥å‘æŒ‡å®šçš„å¥½å‹æˆ–ç¾¤å‘æ¶ˆæ¯ï¼Œä¾‹å¦‚ï¼š</p>

<p>ç»™å¥½å‹å¼ ä¸‰å‘æ¶ˆæ¯ï¼Œå‘Šè¯‰ä»–æ˜å¤©çš„ä¼šè®®å–æ¶ˆäº†ï¼Œåªéœ€è¦å¯¹æœºå™¨äººè¯´â€œå‘Šè¯‰å¼ ä¸‰ï¼Œæ˜å¤©çš„ä¼šè®®å–æ¶ˆäº†â€ï¼Œå¾®ä¿¡æœºå™¨äººè‡ªåŠ¨å‘å¼ ä¸‰å‘é€å¾®ä¿¡æ¶ˆæ¯</p>

<p>é…åˆè¯­éŸ³è¯†åˆ«æŠ€æœ¯ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨è¯­éŸ³åƒä½¿ç”¨æ™ºèƒ½éŸ³ç®±ä¸€æ ·æ§åˆ¶å¾®ä¿¡å®Œæˆæˆ‘ä»¬éœ€è¦çš„åŠ¨ä½œã€‚</p>

<h2 id="å®ç°">å®ç°</h2>

<p>åŸºäºTypeChatå®ç°ï¼Œæˆ‘ä»¬ä»…ä»…éœ€è¦å®šä¹‰ä¸€ä¸ªç±»å‹æ–‡ä»¶ï¼ŒTypeChatåˆ™ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ä»â€å‘Šè¯‰å¼ ä¸‰ï¼Œæ˜å¤©çš„ä¼šè®®å–æ¶ˆäº†â€ä¸­æå–å‡ºæ¥æ”¶äººå’Œå†…å®¹ã€‚</p>

<p>æˆ‘ä»¬å¸Œæœ›æ ¼å¼åŒ–åçš„ä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼š</p>

<pre><code class="language-TypeScript">{
    "actions": [
      {
        "actionType": "sendMessage",
        "event": {
          "text": "æ˜å¤©çš„ä¼šè®®å–æ¶ˆäº†",
          "contacts": [
            "å¼ ä¸‰"
          ]
        }
      }
    ]
  }
</code></pre>

<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡contactsæŸ¥æ‰¾å¾®ä¿¡å¥½å‹ï¼Œå¹¶å°†textçš„æ¶ˆæ¯å‘é€ç»™ä»–</p>

<p>æ„å»ºç±»å‹,å¯¹åº”çš„ç±»å‹æ–‡ä»¶messageActionsSchema.tsï¼š</p>

<pre><code class="language-TypeScript">// The following types define the structure of an object of type MessageActions that represents a list of requested message actions

// é€šçŸ¥ã€xxxã€‘ï¼šä¼šè®®å–æ¶ˆäº†ã€å‘Šè¯‰ã€xxxã€‘ï¼šä¼šè®®å–æ¶ˆäº†
export type Message = {
    // Some message content, such as coming to the meeting immediately and picking up the delivery at the door
    text: string;
    // a list of people like 'team'
    contacts: string[];
};

// é€šçŸ¥ç¾¤ã€xxxã€‘ï¼šä¼šè®®å–æ¶ˆäº†ã€ç¾¤ã€xxxã€‘ï¼šä¼šè®®å–æ¶ˆäº†
export type RoomMessage = {
    // Some message content, such as coming to the meeting immediately and picking up the delivery at the door
    text: string;
    // a list of room or named groups like 'team'
    rooms: string[];
};

export type SendMessageAction = {
    // å‘æŸäººå‘é€æ¶ˆæ¯æˆ–é€šçŸ¥æŸäºº
    actionType: 'sendMessage';
    event: Message;
};

export type SendRoomMessageAction = {
    // å‘æŸä¸ªç¾¤å‘é€æ¶ˆæ¯æˆ–å‘æŸä¸ªç¾¤å‘é€šçŸ¥
    actionType: 'sendRoomMessage';
    event: RoomMessage;
};

// if the user types text that can not easily be understood as a calendar action, this action is used
export interface UnknownAction {
    actionType: 'unknown';
    // text typed by the user that the system did not understand
    text: string;
}

export type Action =
    | UnknownAction
    | SendRoomMessageAction
    | SendMessageAction;

export type MessageActions = {
    actions: Action[];
};

</code></pre>

<p>ä½¿ç”¨TypeChatå®ç°ä¸€ä¸ªmessageStructuringå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›æˆ‘ä»¬å¸Œæœ›çš„ç›®æ ‡æ ¼å¼</p>

<pre><code class="language-TypeScript">import * as fs from 'fs'
import * as path from 'path'
import { fileURLToPath } from 'url'
import { dirname } from 'path'
import * as dotenv from 'dotenv'
import { log } from 'wechaty'

import { createLanguageModel, createJsonTranslator } from 'typechat'
import type { MessageActions } from '../types/messageActionsSchema'

const __filename = fileURLToPath(import.meta.url)
const __dirname = dirname(__filename)

// TODO: use local .env file.
dotenv.config({ path: path.join(__dirname, '../../.env') })
log.info('env', process.env)

const model = createLanguageModel(process.env)
const schema = fs.readFileSync('src/types/messageActionsSchema.ts', 'utf8')
const translator = createJsonTranslator&lt;MessageActions&gt;(model, schema, 'MessageActions')
translator.validator.stripNulls = true

// Process requests interactively or from the input file specified on the command line
export const messageStructuring = async (text: string) =&gt; {
  const response: any = await translator.translate(text)
  log.info('messageStructuring:', JSON.stringify(response, undefined, 2))
  if (!response.success) {
    log.info('messageStructuring è¯·æ±‚å¤±è´¥ï¼š\n', response.message)
    return response
  }
  const messageActions = response.data
  // log.info('ç»“æ„åŒ–æ•°æ®ï¼š\n', JSON.stringify(messageActions, undefined, 2))
  if (messageActions.actions.some((item: { actionType: string }) =&gt; item.actionType === 'unknown')) {
    log.info('è¯­ä¹‰æ— åŒ¹é…ï¼š\n', "I didn't understand the following:")
    for (const action of messageActions.actions) {
      if (action.actionType === 'unknown') log.info('æœªåŒ¹é…åˆ°ç±»å‹ï¼š\n', action.text)
    }
    return messageActions
  }
  return messageActions
}

</code></pre>

<p>æœ€åæˆ‘ä»¬åœ¨ä¸»ç¨‹åºä¸­å®ç°ï¼šå½“æ”¶åˆ°æŒ‡å®šç¾¤æˆ–å¥½å‹çš„æ¶ˆæ¯æ—¶ï¼Œä¸­è°ƒç”¨messageStructuringè¿”å›æ ¼å¼åŒ–çš„æ•°æ®ï¼Œç„¶åè°ƒç”¨wehcaty apiç»™æŒ‡å®šå¥½å‹å‘é€æ¶ˆæ¯ã€‚</p>

<pre><code class="language-TypeScript">async function onMessage (msg: Message) {
  log.info('StarterBot', msg.toString())
  const text = msg.text()
  const talker = msg.talker()
  const talkerName = talker.name()
  const room = msg.room()
  const topic = await room?.topic()
  const ADMIN_WX_NAME =  process.env['ADMIN_WX_NAME']
  const ADMIN_ROOM_TOPIC =  process.env['ADMIN_ROOM_TOPIC']

  if (msg.text() === 'ding') {
    await msg.say('dong')
  }

  if (talkerName === ADMIN_WX_NAME || (topic &amp;&amp; topic === ADMIN_ROOM_TOPIC)) {

    if (text[0] === '/') {
      const textArr = text.split(' ')
      if (textArr[0] === '/llm' &amp;&amp; textArr.length &gt; 1) {
        log.info('ç®¡ç†å‘˜æˆ–ç®¡ç†ç¾¤æ¶ˆæ¯', talkerName, topic)
        const res: MessageActions = await messageStructuring(text.replace('/llm', ''))
        log.info('LLMè¯†åˆ«ç»“æœ:', JSON.stringify(res))

        if (res.actions.length) {
          const textMsg:Action|undefined = res.actions[0]
          const successList = []
          const failList = []
          if (textMsg?.actionType === 'sendMessage' &amp;&amp; textMsg.event.contacts.length) {
            const relpText = textMsg.event.text + `\nâ€”â€”â€”â€”From:${msg.talker().name()}`
            const contacts = textMsg.event.contacts
            for (const i in contacts) {
              const curContact = contacts[i]
              let toUser = await bot.Contact.find({ alias:curContact })
              if (!toUser) {
                toUser = await bot.Contact.find({ name:curContact })
              }
              log.info('toUser:', JSON.stringify(toUser))
              if (toUser) {
                await toUser.say(relpText)
                successList.push(curContact)
              } else {
                failList.push(curContact)
              }
            }
            const timeString = new Date().toLocaleString()
            if (contacts.length === successList.length) {
              await msg.say(`${talkerName} /llm &gt;\n${timeString}\nå…¨éƒ¨å‘é€æˆåŠŸ[${successList.length}]ï¼š${successList.join('ã€')}`)
            } else if (contacts.length === failList.length) {
              await msg.say(`${talkerName} /llm &gt;\n${timeString}\nå…¨éƒ¨å‘é€å¤±è´¥[${failList.length}]ï¼š${failList.join('ã€')}`)
            } else {
              await msg.say(`${talkerName} /llm &gt;\n${timeString}\nå‘é€æˆåŠŸ[${successList.length}/${contacts.length}]ï¼š${successList.join('ã€')}\nå‘é€å¤±è´¥[${failList.length}/${contacts.length}]ï¼š${failList.join('ã€')}`)
            }
          }
          if (textMsg?.actionType === 'sendRoomMessage' &amp;&amp; textMsg.event.rooms.length) {
            const relpText = textMsg.event.text + `\nâ€”â€”â€”â€”From:${msg.talker().name()}`
            const rooms = textMsg.event.rooms
            for (const i in rooms) {
              const curRoom = rooms[i]
              const toUser = await bot.Room.find({ topic:curRoom })

              log.info('toUser:', JSON.stringify(toUser))
              if (toUser) {
                await toUser.say(relpText)
                successList.push(curRoom)
              } else {
                failList.push(curRoom)
              }
            }
            const timeString = new Date().toLocaleString()
            if (rooms.length === successList.length) {
              await msg.say(`${talkerName} /llm &gt;\n${timeString}\nå…¨éƒ¨å‘é€æˆåŠŸ[${successList.length}]ï¼š${successList.join('ã€')}`)
            } else if (rooms.length === failList.length) {
              await msg.say(`${talkerName} /llm &gt;\n${timeString}\nå…¨éƒ¨å‘é€å¤±è´¥[${failList.length}]ï¼š${failList.join('ã€')}`)
            } else {
              await msg.say(`${talkerName} /llm &gt;\n${timeString}\nå‘é€æˆåŠŸ[${successList.length}/${rooms.length}]ï¼š${successList.join('ã€')}\nå‘é€å¤±è´¥[${failList.length}/${rooms.length}]ï¼š${failList.join('ã€')}`)
            }
          }
        }
      }
    }

  } else {
    log.info('ä¸æ˜¯ç®¡ç†å‘˜æˆ–ç®¡ç†ç¾¤æ¶ˆæ¯', talkerName, topic)
  }
}
</code></pre>

<p>åœ¨.envä¸­é…ç½®chatgptçš„api keyä»¥åŠç®¡ç†å‘˜ç¾¤ä¿¡æ¯ï¼Œè¿è¡Œèµ·ç¨‹åºï¼Œä¸€ä¸ªç®€å•çš„æ™ºèƒ½å¾®ä¿¡åŠ©æ‰‹å°±å®Œæˆäº†ã€‚</p>

<h2 id="æ•ˆæœ">æ•ˆæœ</h2>

<p><img src="/assets/2023/08-use-llm-control-your-wechat/1.webp" alt="send" /></p>

<p><img src="/assets/2023/08-use-llm-control-your-wechat/2.webp" alt="res" /></p>

<p>å‘ç®¡ç†å‘˜ç¾¤å‘é€æ§åˆ¶æŒ‡ä»¤ï¼š</p>

<pre><code class="language-TypeScript">/llm å‘Šè¯‰å¼ ä¸‰ï¼Œæ˜å¤©çš„ä¼šè®®å–æ¶ˆäº†

ï¼ˆå¼ ä¸‰ä¸æ˜¯æœºå™¨äººçš„å¥½å‹ï¼‰

luyuchao /llm &gt;
2023/8/6 22:10:20
å…¨éƒ¨å‘é€å¤±è´¥[1]ï¼šå¼ ä¸‰
</code></pre>

<pre><code class="language-TypeScript">/llm å‘Šè¯‰luyuchaoï¼Œæ˜å¤©çš„ä¼šè®®å–æ¶ˆäº†

ï¼ˆluyuchaoæ˜¯æœºå™¨äººçš„å¥½å‹ï¼‰

luyuchao /llm &gt;
2023/8/6 22:31:19
å…¨éƒ¨å‘é€æˆåŠŸ[1]ï¼šluyuchao
</code></pre>

<pre><code class="language-TypeScript">/llm é€šçŸ¥ã€å¤§å¸ˆã€luyuchaoã€‘ï¼šä»Šå¤©æ™šä¸Šåˆ°å…¬å¸å¼€ä¼š

(å¤§å¸ˆã€luyuchaoå‡ä¸ºæœºå™¨äººå¥½å‹)

luyuchao /llm &gt;
2023/8/6 22:33:13
å…¨éƒ¨å‘é€æˆåŠŸ[2]ï¼šå¤§å¸ˆã€luyuchao
</code></pre>

<blockquote>
  <p>åœ¨githubå¯ä»¥æŸ¥çœ‹å®Œæ•´æ•ˆæœæˆªå›¾<a href="https://github.com/atorber/type-wechaty">https://github.com/atorber/type-wechaty</a></p>
</blockquote>

<h2 id="å†å²æ–‡ç« ">å†å²æ–‡ç« </h2>

<ul>
  <li><a href="https://wechaty.js.org/2021/03/17/node-wechaty-and-wechaty-puppet-padlocal/">Wechaty+å¾®ä¿¡å°ç¨‹åºå®ç°ç¾¤å†…æ´»åŠ¨æŠ¥å</a></li>
  <li><a href="https://wechaty.js.org/2021/04/22/how-to-publish-blog-on-wechaty/">å…¥é—¨ï¼šå°ç™½å¦‚ä½•åœ¨wechatyç¤¾åŒºå‘å¸ƒè‡ªå·±çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼ˆä¸€ï¼‰</a></li>
  <li><a href="https://wechaty.js.org/2021/07/13/wechaty-puppet-xp-start-up/">å…¨æ–°çš„Windows puppeté¡¹ç›®wechaty-puppet-xpå¯åŠ¨</a></li>
</ul>]]></content><author><name>atorber</name></author><category term="article" /><category term="blog" /><category term="study" /><category term="introduction" /><summary type="html"><![CDATA[éšç€ChatGPTç«çˆ†ï¼ŒLLMåº”ç”¨å¦‚é›¨åæ˜¥ç¬‹ï¼Œå±‚å‡ºä¸ç©·ã€‚å‡ ä¹ä»»ä½•äººéƒ½å¯ä»¥åŸºäºå¤§é¢„è¨€æ¨¡å‹å¼€å‘å‡ºè‡ªå·±çš„å¤©çŒ«ç²¾çµã€å°çˆ±åŒå­¦ã€å°åº¦å°åº¦â€¦]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2023/08-use-llm-control-your-wechat/rare-book.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2023/08-use-llm-control-your-wechat/rare-book.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">ç›´å‡»ç°åœº:Wechatyåœ¨WAIC2023å¼€æºé›†å¸‚</title><link href="https://wechaty.js.org/2023/07/08/wechaty-in-waic2023/" rel="alternate" type="text/html" title="ç›´å‡»ç°åœº:Wechatyåœ¨WAIC2023å¼€æºé›†å¸‚" /><published>2023-07-08T00:00:00+00:00</published><updated>2023-07-08T00:00:00+00:00</updated><id>https://wechaty.js.org/2023/07/08/wechaty-in-waic2023</id><content type="html" xml:base="https://wechaty.js.org/2023/07/08/wechaty-in-waic2023/"><![CDATA[<h2 id="wechatyå—é‚€å‚åŠ waic2023å¼€æºé›†å¸‚ç°åœºç›´å‡»">Wechatyå—é‚€å‚åŠ WAIC2023å¼€æºé›†å¸‚ç°åœºç›´å‡»</h2>

<p>ä¸Šå‘¨å…­ï¼ŒWechatyç¤¾åŒºå—é‚€å‚åŠ äº†WAICå¼€æºé›†å¸‚ï¼Œç°åœºæ°›å›´éå¸¸çƒ­çƒˆã€‚è®¸å¤šçƒ­æƒ…çš„å°ä¼™ä¼´ç§¯æå‚ä¸äº†Wechatyçš„äº’åŠ¨æ´»åŠ¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç°åœºç…§ç‰‡ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å§ï¼å¤šå›¾é¢„è­¦~</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/1.webp" alt="1.webp" />
<img src="/assets/2023/07-wechaty-in-waic2023/2.webp" alt="2.webp" />
èµ°è¿›ä¼šåœºä¹‹å‰ï¼Œæˆ‘é¦–å…ˆè¢«æ¢å®å¤§æ°”çš„å¤§ä¼šæ ‡è¯†æ‰€å¸å¼•ï¼Œç§‘æŠ€æ„Ÿæ»¡æ»¡</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/3.webp" alt="3.webp" />
WAIC2023å¤§ä¼š3å¤©çš„æ—¥ç¨‹</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/4.webp" alt="4.webp" />
Wechatyç¤¾åŒºçš„æˆå‘˜ä»¬æ—©æ—©åšå¥½äº†å‡†å¤‡ï¼Œçƒ­åˆ‡æœŸå¾…ç€å°ä¼™ä¼´ä»¬çš„åˆ°æ¥ã€‚</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/5.webp" alt="5.webp" />
å’ŒWechatyç¤¾åŒºå¿—æ„¿è€…åˆå½±</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/6.webp" alt="6.webp" />
æˆ‘æ„Ÿåˆ°éå¸¸å…´å¥‹åœ°æ¥åˆ°é‚€è¯·ï¼Œæˆä¸ºç¤¾åŒºä»£è¡¨ï¼Œåœ¨å¼€æºå¼€æ”¾éº¦ç¯èŠ‚ä¸Šåˆ†äº«æœ‰å…³Wechatyçš„å†…å®¹ã€‚</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/7.webp" alt="7.webp" />
ä»‹ç»å¦‚ä½•é€šè¿‡Wechatyç”¨6è¡Œä»£ç å†™ä¸€ä¸ªèŠå¤©æœºå™¨äºº</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/8.webp" alt="8.webp" />
Wechatyçš„è´¡çŒ®è€…å’Œå¼€å‘è€…æ¥è‡ªå…¨çƒå„åœ°</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/9.webp" alt="9.webp" />
å¥å­äº’åŠ¨ - å›½å†…æœ€å¤§çš„ä½¿ç”¨Wechatyæ¥æ„å»ºäº§å“çš„å•†ä¸šåŒ–åº”ç”¨</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/10.webp" alt="10.webp" />
åå‡ åˆ†é’Ÿçš„ç®€çŸ­æ¼”è®²ç»“æŸï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡å‘€</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/11.webp" alt="11.webp" />
ä¼šåï¼Œå‚åŠ äº†ä¸»åŠæ–¹ä¸¾åŠçš„æ¬¢èšä¼šï¼Œåœ¨è¿™é‡Œé‡è§äº†å…¨å›½å„åœ°æœ‰åˆ›é€ åŠ›çš„å°ä¼™ä¼´ï¼Œå¹¶è§‚çœ‹äº†é¸¡å°¾é…’è¡¨æ¼”</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/12.webp" alt="12.webp" />
ä½äºå¼ æ±Ÿç§‘å­¦ä¼šé¦†é¡¶æ¥¼çš„éœ²å¤©çƒ§çƒ¤</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/13.webp" alt="13.webp" />
ä¸Šæµ·å¸‚å‰¯å¸‚é•¿ï¼Œä¸Šæµ·å¸‚äººå·¥æ™ºèƒ½åä¼šä¼šé•¿ç­‰ä¸»åŠæ–¹çš„åˆå½±</p>

<p><img src="/assets/2023/07-wechaty-in-waic2023/14.webp" alt="14.webp" />
åœ¨ç¾ä¸½å°å§å§çš„ä¼´å¥ä¸­ç»“æŸ</p>

<h2 id="wechatyçš„å¼€æºå†ç¨‹">Wechatyçš„å¼€æºå†ç¨‹</h2>

<p>æœ¬æ¬¡å¼€æºå¼€æ”¾éº¦æ´»åŠ¨çš„PPTåˆ†äº«</p>

<div style="
    position: relative;
    padding-bottom: 56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="https://docs.google.com/presentation/d/1jgU1T-hTcqMxUQ1IUI6NxsO4jkbXZzGd/edit?usp=drive_link&amp;ouid=111409902278378475632&amp;rtpof=true&amp;sd=true" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>]]></content><author><name>aiamber</name></author><category term="announcement" /><category term="news" /><category term="ecosystem" /><category term="wechaty-way" /><summary type="html"><![CDATA[Wechatyå—é‚€å‚åŠ WAIC2023å¼€æºé›†å¸‚ç°åœºç›´å‡»]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2023/07-wechaty-in-waic2023/2023-waic.webp" /><media:content medium="image" url="https://wechaty.js.org/assets/2023/07-wechaty-in-waic2023/2023-waic.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>